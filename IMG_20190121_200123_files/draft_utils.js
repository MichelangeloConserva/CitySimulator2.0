define(["require","exports","draft-js","punycode","immutable"],function(e,t,n,r,o){"use strict";function a(e,t){return n.EditorState.forceSelection(n.EditorState.push(e,t,"insert-fragment"),t.getSelectionAfter())}function c(e,t,r,o,a,c){return n.Modifier.replaceText(e,n.SelectionState.createEmpty(t).merge({anchorOffset:r,focusOffset:o}),a,void 0,c)}function i(e,t,n){for(var r,o,a,c=t.getText();null!==(r=e.exec(c));)o=r.index,a=r[0].length,c=c.substring(o+a),n(o,o+a)}function u(e,r){var o=null,a=null,c=e.start,i=e.end,u=null,l=null,d=0;if(r.getBlockMap().forEach(function(e,n){if(e&&"atomic"!==e.getType()){var r=t.decodeUnicode(e.getText());if(n&&null===o&&c<d+r.length){o=n;var f=c-d;u=t.encodeUnicode(r.slice(0,f)).length}if(n&&null===a&&i<=d+r.length){a=n;var f=i-d;l=t.encodeUnicode(r.slice(0,f)).length}d+=r.length}return o&&a}),!o||!a)throw"Bad range";return n.SelectionState.createEmpty(o).merge({anchorKey:o,anchorOffset:u,focusKey:a,focusOffset:l})}function l(e){return e.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}function d(e){if("img"===e.tagName.toLowerCase()){var t=e.getAttribute("data-emoji-ch");if(t){var n=document.createElement("span");return n.textContent=t,n}}return e}function f(e){var t=e.style,n=e.tagName.toLowerCase(),r=[];return(parseInt(t.fontWeight||"0")>=600||"bold"===t.fontWeight||"b"===n||"strong"===n)&&(r=r.concat(["BOLD"])),"underline"!==t.textDecoration&&"u"!==n||(r=r.concat(["UNDERLINE"])),"strikethrough"!==t.textDecoration&&"s"!==n&&"strike"!==n||(r=r.concat(["STRIKETHROUGH"])),"italic"!==t.fontStyle&&"i"!==n&&"em"!==n||(r=r.concat(["ITALIC"])),r}function s(e,t,n){if(e.hasAttribute("data-entity-key")&&e.getAttribute("data-editor")===n){var r=e.getAttribute("data-entity-key");try{return t.getEntity(r),r}catch(e){return null}}}function g(e){var t=e.html,r=e.contentState,a=e.editorKey,c=e.elementMappers,i=void 0===c?[]:c,u=document.createElement("body");u.innerHTML=t;var l=[],d=u.textContent||"",g=Array(d.length),h=[0,0],y="",m=function(e){void 0===e&&(e="unstyled");var t=g.slice(h[0],h[1]);l=l.concat([(new n.ContentBlock).merge({type:e,key:n.genKey(),text:y,characterList:o.List(t)})]),y="",h=[h[1],h[1]]},p=function(e){return function(t){switch(t.nodeType){case Node.TEXT_NODE:if(t.textContent){var c=n.CharacterMetadata.create(e),u=t.textContent;y+=u;for(var l=0;l<u.length;l++,h[1]++)g[h[1]]=c}break;case Node.ELEMENT_NODE:var d=i.reduce(function(e,t){return t(e)},t);if(d.childNodes.length){var v=e?e.style.toArray():[],E=e?e.entity:null,x=d.tagName.toLowerCase(),T="true"===d.getAttribute("data-block")||["p","li","blockquote","pre"].concat([1,2,3,4,5,6].map(function(e){return"h"+e})).indexOf(x)!==-1;v=v.concat(f(d)),E=s(d,r,a)||E;var b={style:o.OrderedSet(v)};E&&(b.entity=E),Array.from(d.childNodes).forEach(p(b)),T&&m()}}}};return Array.from(u.childNodes).forEach(p()),0===l.length&&m(),o.OrderedMap(l.map(function(e){return[e.getKey(),e]}))}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceContent=a,t.replaceText=c,t.findWithRegex=i,t.locationToSelection=u,t.parseEmail=l,t.decodeUnicode=function(e){return r.ucs2.decode(e)},t.encodeUnicode=function(e){return r.ucs2.encode(e)},t.paperEmojiMapper=d,t.htmlToFragment=g});
//# sourceMappingURL=draft_utils.min.js-vfl0gPcs0.map