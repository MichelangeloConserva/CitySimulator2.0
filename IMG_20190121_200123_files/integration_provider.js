define(["require","exports","tslib","react","external/prop-types","modules/clean/web_timing_logger","spectrum-integrations/avatar_popover_content/data","modules/clean/api_v2/default_user_client"],function(t,e,n,i,o,r,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i=n.__importDefault(i),o=n.__importStar(o);var l=(function(t){function e(e){var n=t.call(this,e)||this;return n.mounted=!1,n.getApiV2Client=function(){return n.apiV2Client},n.getDataStore=function(){return n.state.dataStore},n.integrationTooltipEnabled=function(){return n.state.integrationTooltipEnabled},n.apiV2Client=new s.DefaultUserApiV2Client(n.props.user),n.state={dataStore:new a.AvatarPopoverContentDataStore(n.apiV2Client),integrationTooltipEnabled:!1},n}return n.__extends(e,t),e.prototype.getChildContext=function(){return{getApiV2Client:this.getApiV2Client,getDataStore:this.getDataStore,isIntegrationTooltipEnabled:this.integrationTooltipEnabled}},e.prototype.componentDidMount=function(){var t=this;this.mounted=!0,r.waitForTTI().then(function(){return n.__awaiter(t,void 0,void 0,function(){var t,e,i;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.apiV2Client.ns("profile_services").rpc("service_permissions_state",{service:{".tag":"slack_dropbox"}},{})];case 1:return t=n.sent(),this.mounted&&(e=t.granted_permissions.filter(function(t){return"chat"===t[".tag"]}).length>0,this.setState({integrationTooltipEnabled:e})),[3,3];case 2:return i=n.sent(),this.mounted&&this.setState({integrationTooltipEnabled:!1}),[3,3];case 3:return[2]}})})})},e.prototype.componentWillUnmount=function(){this.mounted=!1},e.prototype.render=function(){return i.default.Children.only(this.props.children)},e.childContextTypes={getApiV2Client:o.func,getDataStore:o.func,isIntegrationTooltipEnabled:o.func},e})(i.default.Component);e.IntegrationProvider=l});
//# sourceMappingURL=integration_provider.min.js-vflIp2Ur5.map