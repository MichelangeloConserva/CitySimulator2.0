define(["require","exports","tslib","react","spectrum-integrations/avatar_popover_content/stateful_avatar_popover_content","spectrum-integrations/avatar_popover_content/avatar_popover_content","modules/core/i18n","modules/clean/datetime","modules/clean/previews/util","modules/clean/react/pass/constants","spectrum-integrations/avatar_popover_content/sections/seen_state_section","modules/core/user_i18n","external/prop-types","modules/clean/integrations/slack_modal"],function(e,t,a,n,o,r,i,s,l,c,p,_,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a.__importDefault(n),_=a.__importStar(_),u=a.__importStar(u);var m=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onSendIntegrationMessage=function(e,a){"slack"===e&&t._showIntegrationDialog(e,a)},t._showIntegrationDialog=function(e,a){d.showShareToSlackModal(t.context.getApiV2Client(),a.file.file_id,{targetUser:a.targetUser})},t}return a.__extends(t,e),t.prototype._buildSeenStateElement=function(){var e=this.props.userInfo,t="";if(e.isActive)t=i._("Viewing now");else if(null!=e.whenLastSeen){if(t=i._("Viewed %(ago)s",{comment:'Format like "Viewed 5 days ago"'}),t=t.replace("%(ago)s",s.ago(1e3*e.whenLastSeen,!1,!0,!0)),l.shouldShowPlatformInfo()){var a="",o=e.platformType;o===c.PASS_PLATFORM.DESKTOP?a=i._("on desktop"):o===c.PASS_PLATFORM.WEB?a=i._("on web"):o===c.PASS_PLATFORM.MOBILE&&(a=i._("on mobile")),t+=" "+a}}else{var r="";switch(e.accessLevel){case"owner":r=i._("Owner");break;case"writer":r=i._("Can edit");break;case"reader":r=i._("Can comment");break;case"signer":r=i._("Can sign");break;case"reader_no_comment":case void 0:r=i._("Can view")}t+=""+r}return n.default.createElement(p.SeenStateSection,{displayName:e.displayName,seenState:t,isActive:e.isActive,avatarColor:this.props.avatarColor,avatarSize:24,initials:_.getInitials(e.displayName),photoUrl:e.photoUrl})},t.prototype.render=function(){var e=this.props,t=e.userInfo,a=e.fileInfo;return n.default.createElement(o.StatefulAvatarPopoverContent,{targetUser:{account_id:t.key,display_name:t.displayName,email:t.email},file:a,dataStore:this.context.getDataStore(),onSendMessage:this._onSendIntegrationMessage,seenStateElement:this._buildSeenStateElement(),avatarPopoverContentClass:r.AvatarPopoverContentWithWrapper})},t.contextTypes={getApiV2Client:u.func,getDataStore:u.func,isIntegrationTooltipEnabled:u.func},t})(n.default.Component);t.IntegrationTooltip=m});
//# sourceMappingURL=integration_tooltip.min.js-vflHeoJSR.map