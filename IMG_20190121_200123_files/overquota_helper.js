define(["require","exports","tslib","modules/core/i18n","modules/clean/ajax_as_promised","modules/clean/react/overquota_modal_controller","modules/clean/viewer","modules/clean/analytics"],function(e,r,o,t,u,a,n,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),a=o.__importStar(a),r.OverquotaHelper={getVariantSubgrowthProOQNewFolder:function(){return new Promise(function(e,r){var o=n.Viewer.get_viewer().get_users()[0];return o||r("Error: no user found."),u.SilentBackgroundRequest({url:"/subgrowth_pro_oq_new_folder_variant",data:{_subject_uid:o.id}}).then(function(e){return JSON.parse(e)}).then(function(r){e(r.variant)}).catch(function(e){r(e)})})},showSubgrowthProOQNewFolderModal:function(e){var o=e.oqa;a.showOverquota({oqa:o,tagline:t._("You’ll need more space to add new folders.")}),r.OverquotaHelper.logExposureSubgrowthProOQNewFolderModal("V1")},logExposureSubgrowthProOQNewFolderModal:function(e){u.SilentBackgroundRequest({url:"/log/stormcrow_exposures",data:{stormcrow_name:"subgrowth_pro_oq_new_folder",variant:e}})},getVariantSubgrowthProShmCtaCopy:function(){return new Promise(function(e,r){var o=n.Viewer.get_viewer().get_users()[0];return o||r("Error: no user found."),u.SilentBackgroundRequest({url:"/subgrowth_pro_shm_cta_copy",dataType:"json",data:{_subject_uid:o.id}}).then(function(r){e(r)}).catch(function(e){r(e)})})},maybeShowSubgrowthProOQRecurringModal:function(e){var r=n.Viewer.get_viewer().get_users()[0];r&&u.SilentBackgroundRequest({url:"/get_subgrowth_pro_oq_modal_recurring_variant",data:{_subject_uid:r.id}}).then(function(o){try{var n=JSON.parse(o).variant;n&&("V1"===n&&(a.showOverquota({oqa:e,tagline:t._("You’ll need more space to add new files or folders.")}),u.SilentBackgroundRequest({url:"/set_subgrowth_pro_oq_modal_timestamp",data:{_subject_uid:r.id}})),u.SilentBackgroundRequest({url:"/log/stormcrow_exposures",data:{stormcrow_name:"subgrowth_pro_oq_modal_recurring",variant:n}}))}catch(e){}})},maybeShowSubgrowthProOQFileRequestModal:function(e,r){return new Promise(function(o,i){var _=n.Viewer.get_viewer().get_users()[0];_?e?u.SilentBackgroundRequest({url:"/get_subgrowth_pro_oq_file_request_variant",data:{_subject_uid:_.id}}).then(function(e){var n=JSON.parse(e).variant,i="V1"===n;i&&(s.ProEventsLogger.log("oq_fr_view"),a.showOverquota({oqa:r,tagline:t._("Get more space so you can send file requests."),isRequestModal:!0})),u.SilentBackgroundRequest({url:"/log/stormcrow_exposures",data:{stormcrow_name:"subgrowth_pro_oq_file_request",variant:n}}),o(i)}):o(!1):i("Error: no user found.")})}}});
//# sourceMappingURL=overquota_helper.min.js-vflWsNbHY.map