define("modules/clean/react/timeline/components/timeline_event_card",["require","exports","tslib","react","modules/core/user_i18n","modules/clean/react_format","modules/core/i18n","modules/clean/react/title_bubble","modules/clean/react/timeline/constants","modules/clean/avatar/avatar_with_default","modules/clean/avatar/initials_avatar","external/classnames"],function(e,t,n,i,a,r,o,s,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),a=n.__importStar(a),c=n.__importDefault(c),u=n.__importDefault(u),t.CardAvatar=function(e){var t=e.actor,n=e.toBeRolledBack;if(!t)return null;var r=t.photo_url?t.photo_url:void 0,o=u.default({"timeline-event-card__avatar":!0,"timeline-event-card__avatar--to-be-rolled-back":n});return i.default.createElement("div",{className:"timeline-event-card__avatar-container"},i.default.createElement(c.default,{optionalClass:o,dimension:24,shape:"CIRCLE",photoUrl:r,defaultAvatar:i.default.createElement(d.InitialsAvatarWithColorDerivedFromName,{optionalClass:o,dimension:24,shape:"CIRCLE",initials:a.getInitials(t.display_name),name:t.display_name})}))},t.CardCircle=function(e){var t=e.hovered;return i.default.createElement("div",{className:u.default({"timeline-event-card__circle":!0,"timeline-event-card__circle--hovered":t})})},t.CardLineHorizontal=function(e){var t=e.faded;return i.default.createElement("div",{className:u.default({"timeline-event-card__line":!0,"timeline-event-card__line--light":t})})},t.CardLineVertical=function(e){var t=e.faded;return i.default.createElement("div",{className:u.default({"timeline-event-card__line-vertical":!0,"timeline-event-card__line-vertical--faded":t})})};var p=function(e){return i.default.createElement("div",{className:"timeline-event-card__card-heading"},r.reactFormat(e.event.eventHeadline,{strong:i.default.createElement("strong",null)}))},m=function(e){return i.default.createElement("div",{className:"timeline-event-card__card-subheading"},e.event.timeAgo,e.event.folder?i.default.createElement("span",null," ","•"," ",r.reactFormat(o._("in %(location)s",{project:"folder-history"}).format({location:e.event.folder}))):void 0)},h=(function(e){function a(t){var n=e.call(this,t)||this;return n.handleMouseOver=function(){n.setState({hovered:!0}),n.props.onMouseOver(n.props.event)},n.handleMouseOut=function(){n.setState({hovered:!1}),n.props.onMouseOut(n.props.event)},n.onClickOnEvent=function(){n.props.onClick(n.props.event)},n.state={hovered:!1},n}return n.__extends(a,e),a.prototype.render=function(){var e=this.props,n=e.event,a=e.rollbackMode,o=this.state.hovered,c=i.default.createElement("div",{className:u.default({"timeline-event-card__card-text":!0,"timeline-event-card__card-text--strikeout":this.props.toBeRolledBack})},i.default.createElement(p,{event:n}),i.default.createElement(m,{event:n}));return n.displayTooltip&&(c=i.default.createElement(s.TitleBubble,{content:r.reactFormat(n.tooltip,{strong:i.default.createElement("strong",null)}),throttleSpeed:0,position:s.TitleBubble.POSITIONS.BOTTOM,distanceFromTarget:l.BUBBLE_DISTANCE},c)),i.default.createElement("div",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,className:u.default({"timeline-event-card":!0,"timeline-event-card--strikeout":this.props.toBeRolledBack,"timeline-event-card-border-hover":!a})},i.default.createElement("a",{className:"timeline-event-card__border",onClick:this.onClickOnEvent,href:this.props.event.browseHref.toString()},i.default.createElement(t.CardAvatar,{drawTimeline:a,actor:n.actor,toBeRolledBack:this.props.toBeRolledBack}),a&&i.default.createElement(t.CardLineVertical,{faded:this.props.toBeRolledBack}),a&&i.default.createElement(t.CardCircle,{hovered:o}),c,a&&o&&i.default.createElement(t.CardLineHorizontal,{faded:this.props.toBeRolledBack}),a&&o&&i.default.createElement("span",{className:"timeline-event-card__hover-timestamp"},n.timeAgo)))},a})(i.default.Component);t.TimelineEventCard=h}),define("modules/clean/react/timeline/components/timeline_event_header",["require","exports","tslib","react"],function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),t.TimelineEventHeader=function(e){return i.default.createElement("div",{className:"timeline-event-header"},i.default.createElement("div",null,e.segmentName))}}),define("modules/clean/react/timeline/components/timeline_event_list",["require","exports","tslib","react","modules/clean/react/timeline/components/timeline_event_header","modules/core/i18n","modules/clean/react/timeline/components/timeline_event_card","modules/clean/react/timeline/util","external/classnames","modules/clean/react/timeline/data/types","modules/clean/static_urls","modules/clean/react/timeline/components/timeline_event_skeleton","modules/clean/react/sticky/container","modules/clean/react/sticky/sticky","spectrum/icon_arrow","spectrum/tertiary_link","modules/clean/components/loading_indicator"],function(e,t,n,i,a,r,o,s,l,c,d,u,p,m,h,v,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),l=n.__importDefault(l);var _=function(e){var t=e.cursor,n=e.direction,a=function(){return e.onShowMore(t)};return i.default.createElement("div",{className:l.default({"timeline-show-more-card":!0,"timeline-show-more-card--future":n===c.PaginationDirection.future,"timeline-show-more-card--past":n===c.PaginationDirection.past})},i.default.createElement(v.TertiaryLink,{onClick:a},i.default.createElement("div",{className:"timeline-show-more-card--arrow-container"},i.default.createElement(h.IconArrow,{className:"arrow",name:"right"})),i.default.createElement("div",{className:"timeline-show-more-card--text"},r._("Show more",{project:"folder-history"}))))},g=(function(e){function t(t){var n=e.call(this,t)||this;return n.onMouseOverEvent=function(e){n.setState({hoveredEvent:e})},n.onMouseOutEvent=function(e){n.setState({hoveredEvent:e})},n.state={hoveredEvent:void 0},n}return n.__extends(t,e),t.prototype.renderNeverLoaded=function(){return null},t.prototype.renderLoading=function(){return i.default.createElement(u.TimelineEventCardsSkeleton,{animated:!0})},t.prototype.renderTimelineEvents=function(e){var t,n,a=this;e.pageBeingLoaded===c.PaginationDirection.past?(t=i.default.createElement("div",{className:"timeline-show-more-card"},i.default.createElement(f.LoadingIndicator,{style:"blue_spinner"})),n=i.default.createElement("div",null)):e.pageBeingLoaded===c.PaginationDirection.future?(t=i.default.createElement("div",null),n=i.default.createElement("div",{className:"timeline-show-more-card"},i.default.createElement(f.LoadingIndicator,{style:"blue_spinner"}))):"none"===e.pageBeingLoaded?(n="reached-end"!==e.cursorFuture.type&&this.props.displayShowMoreFuture?i.default.createElement(_,{cursor:e.cursorFuture,direction:c.PaginationDirection.future,onShowMore:this.props.onShowMoreFuture}):i.default.createElement("div",null),t="reached-end"!==e.cursorPast.type&&this.props.displayShowMorePast?i.default.createElement(_,{cursor:e.cursorPast,direction:c.PaginationDirection.past,onShowMore:this.props.onShowMorePast}):i.default.createElement("div",null)):s.assertNever(e.pageBeingLoaded);var r=this.state.hoveredEvent?e.processedEvents.indexOf(this.state.hoveredEvent):-1,o=e.processedEvents,l=o[0],d=o.slice(1);return i.default.createElement(p.StickyContainer,null,this.renderTimelineEvent({event:l,strikeout:!1}),n,d.map(function(e,t){return a.renderTimelineEvent({event:e,strikeout:a.props.isForARollback&&t<r})}),t)},t.prototype.renderTimelineEvent=function(e){var t=e.event,n=e.strikeout;return t.type===c.TimelineEventType.event?i.default.createElement(o.TimelineEventCard,{rollbackMode:this.props.isForARollback,onClick:this.props.onClickEvent,onMouseOver:this.onMouseOverEvent,onMouseOut:this.onMouseOutEvent,event:t,toBeRolledBack:n}):t.type===c.TimelineEventType.dateBanner?i.default.createElement(m.Sticky,{className:"timeline-sticky-header",offsetHeight:32},i.default.createElement(a.TimelineEventHeader,{segmentName:t.humanReadableDate})):s.assertNever(t)},t.prototype.renderTimelineEmptyList=function(){return this.props.timelineEvents.type!==c.TimelineEventState.hasContent?null:i.default.createElement("div",null,i.default.createElement(a.TimelineEventHeader,{segmentName:r._("Today",{project:"folder-history"})}),i.default.createElement("img",{alt:"",className:"timeline-event-list__empty-img",src:d.static_url("/static/images/timeline/illo-no-activity-vflHN_Psx.png")}),i.default.createElement("div",{className:"timeline-event-list__empty-text"},r._("Sorry, there’s no content here!",{project:"folder-history"})))},t.prototype.render=function(){var e;return this.props.timelineEvents.type===c.TimelineEventState.neverLoaded?e=this.renderNeverLoaded():this.props.timelineEvents.type===c.TimelineEventState.loadingEntirePanel?e=this.renderLoading():this.props.timelineEvents.type===c.TimelineEventState.hasContent?e=0===this.props.timelineEvents.processedEvents.length?this.renderTimelineEmptyList():this.renderTimelineEvents(this.props.timelineEvents):(s.assertNever(this.props.timelineEvents),e=null),i.default.createElement("div",{className:"timeline-event-list"},e)},t})(i.default.PureComponent);t.TimelineEventList=g}),define("modules/clean/react/timeline/components/timeline_event_skeleton",["require","exports","tslib","react","external/classnames","modules/clean/react/timeline/constants"],function(e,t,n,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),a=n.__importDefault(a);var o;(function(e){e[e.Avatar=0]="Avatar",e[e.Heading=1]="Heading",e[e.Subheading=2]="Subheading"})(o||(o={}));var s=function(e){var t=e.type,n=e.animated,r=n&&t!==o.Avatar,s=a.default({"timeline-skeleton__skeleton-card":!0,"timeline-skeleton__avatar":t===o.Avatar,"timeline-skeleton__heading":t===o.Heading,"timeline-skeleton__subheading":t===o.Subheading});return i.default.createElement("div",{className:s},r&&i.default.createElement("div",{className:"timeline-skeleton__glint"}))},l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return i.default.createElement("div",{className:"timeline-event-card timeline-event-skeleton"},i.default.createElement("div",{className:"timeline-event-card__border"},i.default.createElement("div",{className:"timeline-event-card__avatar-container"},i.default.createElement(s,{type:o.Avatar,animated:this.props.animated})),i.default.createElement("div",{className:"timeline-event-card__card-text"},i.default.createElement("div",{className:"timeline-event-card__card-heading"},i.default.createElement(s,{type:o.Heading,animated:this.props.animated})),i.default.createElement("div",{className:"timeline-event-card__card-subheading"},i.default.createElement(s,{type:o.Subheading,animated:this.props.animated})))))},t})(i.default.PureComponent),c=(function(e){function t(t){var n=e.call(this,t)||this;return n.setRef=function(e){n.element=e},n.state={height:r.SKELETON.DEFAULT_HEIGHT},n}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.setState({height:this.element&&this.element.clientHeight||r.SKELETON.DEFAULT_HEIGHT})},t.prototype.render=function(){for(var e=r.SKELETON.CARD_HEIGHT,t=Math.ceil(this.state.height/e),n=[],a=0;a<t;a++)n.push(i.default.createElement(l,{animated:this.props.animated}));return i.default.createElement("div",{className:"timeline-skeleton",ref:this.setRef},n)},t})(i.default.PureComponent);t.TimelineEventCardsSkeleton=c}),define("modules/clean/react/timeline/components/timeline_graph",["require","exports","tslib","external/lodash","external/classnames","react","modules/clean/react/timeline/constants"],function(e,t,n,i,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),a=n.__importDefault(a),r=n.__importDefault(r);var s=(function(e){function t(t){var n=e.call(this,t)||this;return n.renderCanvas=function(){var e=n.canvasContext;if(e){e.save(),e.clearRect(0,0,n.props.width,n.props.height),e.translate(.5,.5),e.translate(n.getWidthPadding(),n.getHeightPadding()),n.drawBlueGradient(e),n.drawGrayGradient(e),n.drawBlueGraphLine(e),n.drawGrayGraphLine(e),n.drawBottomBorder(e);var t=n.getActivePoint();t&&(n.drawBlueLineDownOnGraph(e,t),n.drawCircleOnPoint(e,t,"blue")),t&&n.state.closestPointToMouse&&t.event.dateTsInMs!==n.state.closestPointToMouse.event.dateTsInMs&&n.drawCircleOnPoint(e,n.state.closestPointToMouse,"gray"),e.restore(),window.requestAnimationFrame(n.renderCanvas)}},n.updateRef=function(e){e&&(n.ref=e,n.canvasContext=e.getContext("2d"))},n.onMouseMove=function(e){var t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,r=i.minBy(n.getNormalizedPoints(),function(e){return Math.abs(e.x-a)});n.setState({closestPointToMouse:r})},n.onMouseOut=function(e){n.setState({closestPointToMouse:void 0})},n.setDateRef=function(e){n.dateRef=e},n.onClickEnabledCanvas=function(){n.state.closestPointToMouse&&n.props.onSelectDate(n.state.closestPointToMouse.event.dateTsInMs,n.state.closestPointToMouse.event.dateString)},n.onClickDisabledCanvas=function(){n.props.onClickWhenDisabled()},n.state={closestPointToMouse:void 0},n}return n.__extends(t,e),t.prototype.getWidthPadding=function(){return(this.props.width-this.props.widthWithoutPadding)/2},t.prototype.getHeightPadding=function(){return(this.props.width-this.props.widthWithoutPadding)/2},t.prototype.getActivePoint=function(){var e=this,t=void 0,n=this.getNormalizedPoints().find(function(t){return t.event.dateTsInMs===e.props.selectedPointMs});return n?t=n:this.state.closestPointToMouse&&(t=this.state.closestPointToMouse),t},t.prototype.drawBottomBorder=function(e){e.save(),e.beginPath(),e.strokeStyle="#e6e8eb",e.moveTo(0,this.props.height-1),e.lineTo(this.props.widthWithoutPadding,this.props.height-1),e.stroke(),e.restore()},t.prototype.componentDidMount=function(){window.requestAnimationFrame(this.renderCanvas)},t.prototype.getNormalizedPoints=function(){var e=this,t=this.props.data.map(function(e,t){return{eventCount:e,x:t,y:e.count}}),n=i.minBy(t,function(e){return e.x}).x,a=i.maxBy(t,function(e){return e.x}).x,r=i.minBy(t,function(e){return e.y}).y,o=i.maxBy(t,function(e){return e.y}).y;return t.map(function(t){var i=t.x,s=t.y,l=t.eventCount;return{x:(i-n)/a*e.props.widthWithoutPadding,y:e.props.heightWithoutPadding-(s-r)/o*e.props.heightWithoutPadding,event:l}})},t.prototype.addGraphPathToContext=function(e,t){var n=[];e=[e[0],e[0]].concat(e,[e[e.length-1]]);for(var i=2;i<e.length-2;i++)for(var a=0;a<=16;a++){var r=.5*(e[i+1].x-e[i-1].x),o=.5*(e[i+2].x-e[i].x),s=.5*(e[i+1].y-e[i-1].y),l=.5*(e[i+2].y-e[i].y),c=a/16,d=2*Math.pow(c,3)-3*Math.pow(c,2)+1,u=-(2*Math.pow(c,3))+3*Math.pow(c,2),p=Math.pow(c,3)-2*Math.pow(c,2)+c,m=Math.pow(c,3)-Math.pow(c,2),h=d*e[i].x+u*e[i+1].x+p*r+m*o,v=d*e[i].y+u*e[i+1].y+p*s+m*l;n.push({x:h,y:v})}for(var i=1;i<n.length;i++)t.lineTo(n[i].x,n[i].y)},t.prototype.drawGenericGraphLine=function(e,t){var n=this.getNormalizedPoints();e.save(),e.beginPath(),e.moveTo(n[0].x,n[0].y),this.addGraphPathToContext(n,e),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.restore()},t.prototype.drawBlueGraphLine=function(e){var t=this.getActivePoint(),n=t?t.x:this.props.widthWithoutPadding;e.save(),e.beginPath(),e.rect(0,0,n,this.props.height),e.clip(),this.drawGenericGraphLine(e,"#0070e0"),e.restore()},t.prototype.drawGrayGraphLine=function(e){var t=this.getActivePoint(),n=t?t.x:this.props.widthWithoutPadding;e.save(),e.beginPath(),e.rect(n,0,this.props.widthWithoutPadding,this.props.height),e.clip(),this.drawGenericGraphLine(e,"rgba(210, 210, 210, 1"),e.restore()},t.prototype.drawBlueLineDownOnGraph=function(e,t){e.save(),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x,this.props.heightWithoutPadding),e.strokeStyle="#0070e0",e.lineWidth=2,e.stroke(),e.restore()},t.prototype.drawCircleOnPoint=function(e,t,n){e.save(),e.beginPath(),e.arc(t.x,t.y,6,0,2*Math.PI),e.fillStyle="blue"===n?"#0070e0":"#666666",e.fill(),e.restore()},t.prototype.drawGenericGradient=function(e,t){e.save(),e.beginPath(),e.moveTo(0,this.props.height),this.addGraphPathToContext(this.getNormalizedPoints(),e),e.lineTo(this.props.width,this.props.height),e.closePath(),e.clip();var n=e.createLinearGradient(0,0,0,this.props.height);n.addColorStop(0,t.from),n.addColorStop(1,t.to),e.fillStyle=n,e.fillRect(0,0,this.props.widthWithoutPadding,this.props.height),e.restore()},t.prototype.drawBlueGradient=function(e){e.save();var t=this.getActivePoint(),n=t?t.x:this.props.widthWithoutPadding;e.beginPath(),e.rect(0,0,n,this.props.height),e.clip(),this.drawGenericGradient(e,{from:"rgba(0, 119, 237, 0.16",to:"rgba(0, 121, 242, 0.04"}),e.restore()},t.prototype.drawGrayGradient=function(e){e.save();var t=this.getActivePoint(),n=t?t.x:this.props.widthWithoutPadding;e.beginPath(),e.rect(n,0,this.props.widthWithoutPadding,this.props.height),e.clip(),this.drawGenericGradient(e,{from:"rgba(253, 253, 253, 1.0)",to:"rgba(253, 253, 253, 1.0)"}),e.restore()},t.prototype.render=function(){var e=this.getActivePoint(),t=this.props.collapsed?{onClick:this.onClickDisabledCanvas}:{onMouseMove:this.onMouseMove,onMouseOut:this.onMouseOut,onClick:this.onClickEnabledCanvas};return r.default.createElement("div",null,r.default.createElement("div",{style:{paddingLeft:e?Math.max(e.x-o.DATE_LABEL_WIDTH/2,0)+"px":"0"}},r.default.createElement("div",{ref:this.setDateRef,className:a.default({"timeline-graph-date-label":!0,"timeline-graph-date-label--collapsed":this.props.collapsed})},e?e.event.dateString:"")),r.default.createElement("canvas",n.__assign({style:{width:this.props.width,height:this.props.height},width:this.props.width,height:this.props.height,className:"timeline-graph-canvas",ref:this.updateRef},t)))},t})(r.default.PureComponent);t.TimelineGraph=s}),define("modules/clean/react/timeline/components/timeline_graph_page",["require","exports","tslib","react","external/classnames","modules/core/i18n","modules/clean/react/timeline/data/types","modules/clean/react/timeline/data/actions","modules/clean/react/timeline/components/timeline_graph","modules/clean/react/timeline/constants","modules/clean/react/timeline/components/timeline_event_skeleton","modules/clean/react/timeline/components/timeline_event_list"],function(e,t,n,i,a,r,o,s,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),a=n.__importDefault(a);var p=function(){},m=(function(e){function t(t){var n=e.call(this,t)||this;return n.onSelectDate=function(e,t){n.props.dispatch({type:o.TimelineActionType.setRollbackPanelSelectedDate,selectedDateTs:e,selectedDateString:t}),n.props.dispatch(s.fetchTimelineEventsAction({user:n.props.user,fqpath:n.props.fqpath,direction:o.PaginationDirection.past,timestampInSeconds:Math.floor(e/1e3)})),n.setState({collapsed:!0})},n.onUnselectDate=function(){n.setState({collapsed:!1})},n.state={collapsed:!1},n}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.dispatch(s.fetchEventCountsAction({user:this.props.user,fqpath:this.props.fqpath,type:"last two weeks"}))},t.prototype.renderBody=function(){return this.state.collapsed?i.default.createElement(u.TimelineEventList,{timelineEvents:this.props.timelineEvents,isForARollback:!0,onShowMoreFuture:p,onShowMorePast:p,onClickEvent:p,displayShowMoreFuture:!0,displayShowMorePast:!0}):i.default.createElement(d.TimelineEventCardsSkeleton,{animated:!1})},t.prototype.renderGraphSection=function(){if("never-loaded"===this.props.page.contents.type||"loading"===this.props.page.contents.type)return i.default.createElement("div",null);var e=c.GRAPH_WIDTH_NO_OFFSET,t=this.state.collapsed?c.GRAPH_COLLAPSED_HEIGHT:c.GRAPH_HEIGHT_NO_OFFSET;return i.default.createElement("div",{className:"timeline-graph-panel-container"},i.default.createElement(l.TimelineGraph,{onSelectDate:this.onSelectDate,onClickWhenDisabled:this.onUnselectDate,selectedPointMs:this.props.page.contents.selectedDateTsInMs,data:this.props.page.contents.data,width:e,height:t,widthWithoutPadding:e-2*c.GRAPH_OFFSET,heightWithoutPadding:t-2*c.GRAPH_OFFSET,collapsed:this.state.collapsed}),i.default.createElement("div",{className:a.default({"timeline-folder-activity":!0,"timeline-folder-activity--collapsed":this.state.collapsed})},r._("Folder activity")))},t.prototype.render=function(){var e="selectedDateString"in this.props.page.contents&&this.props.page.contents.selectedDateString||" ";return i.default.createElement("div",{className:"timeline-graph-panel"},i.default.createElement("div",{className:a.default({"timeline-graph-title-container":!0,"timeline-graph-title-container--collapsed":this.state.collapsed})},i.default.createElement("div",{className:"timeline-graph-panel-title"},r._("When would you like to go back to?",{project:"folder-history"})),i.default.createElement("div",{className:"timeline-graph-panel-date"},e)),this.renderGraphSection(),this.renderBody())},t})(i.default.PureComponent);t.TimelineGraphPage=m}),define("modules/clean/react/timeline/components/timeline_nux",["require","exports","tslib","react","spectrum/tertiary_link","modules/core/i18n","modules/clean/static_urls"],function(e,t,n,i,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),t.TimelineNUX=function(e){return i.default.createElement("div",{className:"timeline-nux"},i.default.createElement("div",{className:"timeline-nux__image"},i.default.createElement("img",{alt:"",src:o.static_url("/static/images/timeline/illo-folders-vflgLOTvA.png")})),i.default.createElement("div",{className:"timeline-nux__title"},r._("Travel back through time",{project:"folder-history"})),i.default.createElement("div",{className:"timeline-nux__text"},r._("Here’s a timeline showing everything that’s happened in this\n            folder. You can undo a single activity or travel all the way back\n            before things went wrong.",{project:"folder-history"})),i.default.createElement(a.TertiaryLink,{className:"timeline-nux__centered-link",onClick:e.onDismiss},r._("Got it",{project:"folder-history"})))}}),define("modules/clean/react/timeline/components/timeline_rollback_panel",["require","exports","tslib","react","modules/clean/react/timeline/components/timeline_nux","modules/clean/react/timeline/data/types","modules/clean/react/timeline/util","modules/clean/react/timeline/data/actions","modules/clean/react/timeline/components/timeline_graph_page"],function(e,t,n,i,a,r,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i);var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hideNUX=function(){t.props.dispatch(s.dismissNUXAction({userId:t.props.user.id}))},t}return n.__extends(t,e),t.prototype.renderNUXPage=function(){return i.default.createElement(a.TimelineNUX,{onDismiss:this.hideNUX})},t.prototype.renderDayResolutionPage=function(e){return i.default.createElement(l.TimelineGraphPage,{user:this.props.user,fqpath:this.props.fqpath,page:e,dispatch:this.props.dispatch,timelineEvents:this.props.timelineEvents})},t.prototype.render=function(){var e;switch(this.props.data.page){case r.RollbackPanelPage.notVisible:e=null;break;case r.RollbackPanelPage.NUXPage:e=this.renderNUXPage();break;case r.RollbackPanelPage.dayResolutionPage:e=this.renderDayResolutionPage(this.props.data);break;default:return o.assertNever(this.props.data)}return e},t})(i.default.PureComponent);t.TimelineRollbackPanel=c}),define("modules/clean/react/timeline/components/timeline_title",["require","exports","tslib","react","modules/clean/react/sprite","modules/clean/react/timeline/constants","modules/clean/react/title_bubble","modules/core/i18n"],function(e,t,n,i,a,r,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),t.TimelineTitle=function(e){return i.default.createElement("section",{className:"timeline-title"},i.default.createElement("div",{className:"timeline-title__header"},i.default.createElement("div",{className:"timeline-title__header-text"},s._("Folder history",{project:"folder-history"}),i.default.createElement("sup",null,s._("Beta",{project:"folder-history"}))),i.default.createElement(o.TitleBubble,{content:s._("Hide",{project:"folder-history"}),position:o.TitleBubble.POSITIONS.LEFT,distanceFromTarget:r.BUBBLE_DISTANCE},i.default.createElement(a.Sprite,{onClick:e.hideTimeline,className:"timeline-title__back",group:"web",name:"s_sidebar_hide",alt:s._("Hide Sidebar",{project:"folder-history"})}))))}}),define("modules/clean/react/timeline/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUBBLE_DISTANCE=10,t.API_TIMESTAMP_NOW=0,t.SKELETON={CARD_HEIGHT:91,DEFAULT_HEIGHT:500},t.TIMELINE_SKELETON_DEFAULT_HEIGHT=500,t.TimelineEventHeaderHeight=32,t.GRAPH_OFFSET=8,t.GRAPH_COLLAPSED_HEIGHT=50,t.GRAPH_WIDTH_NO_OFFSET=315,t.GRAPH_HEIGHT_NO_OFFSET=125,t.GRAPH_WIDTH=t.GRAPH_WIDTH_NO_OFFSET-2*t.GRAPH_OFFSET,t.GRAPH_HEIGHT=t.GRAPH_HEIGHT_NO_OFFSET-2*t.GRAPH_OFFSET,t.DATE_LABEL_WIDTH=100}),define("modules/clean/react/timeline/data/actions",["require","exports","tslib","modules/clean/react/timeline/data/types","modules/clean/react/timeline/data/api","modules/clean/viewer","modules/clean/react/timeline/data/selectors","modules/clean/datetime"],function(e,t,n,i,a,r,o,s){"use strict";function l(e){var t=this;return function(r,o){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return r({type:i.TimelineActionType.dismissNUX}),[4,a.markSeenNUX(e)];case 1:return t.sent(),r({type:i.TimelineActionType.changeRollbackPageToDayResolutionPage}),[2]}})})}}function c(e){var t=this;return function(r,o){return n.__awaiter(t,void 0,void 0,function(){var t,o,l,c,d,u,p,m,h,v,f,_,g;return n.__generator(this,function(n){switch(n.label){case 0:return t=new Date,o=Math.floor(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()-14,0,0,0)/1e3),l=Math.floor(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0)/1e3),r({type:i.TimelineActionType.setTimelineEventCountsLoading}),[4,a.fetchEventCounts({user:e.user,fqpath:e.fqpath,startTs:o,endTs:l,aggregation:"daily"})];case 1:for(c=n.sent(),d=[],u=0,p=c.counts;u<p.length;u++)m=p[u],h=m.count,v=m.start_ts,f=1e3*v,_=new Date(f),g=s.month_with_year(_.getUTCMonth(),_.getUTCDate()),d.push({dateString:g,count:h,dateTsInMs:f});return r({type:i.TimelineActionType.setTimelineEventCountsLoaded,eventCounts:d}),[2]}})})}}function d(e){var t=this;return function(r,o){return n.__awaiter(t,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return r({type:i.TimelineActionType.setTimelineEventsLoading}),[4,a.fetchEventsApi(e)];case 1:return t=n.sent(),r({type:i.TimelineActionType.setTimelineEventsLoaded,events:t.events||[],user:e.user,direction:e.direction,cursor:t.cursor?{type:"has-cursor",cursor:t.cursor}:{type:"reached-end"},hasMore:t.has_more||!1}),[2]}})})}}function u(e){var t=e.browseContext,n=e.user;return{type:i.TimelineActionType.initialize,browseContext:t,user:n,viewer:r.Viewer.get_viewer()}}function p(e){var t=this;return function(r,o){return n.__awaiter(t,void 0,void 0,function(){var t,o;return n.__generator(this,function(n){switch(n.label){case 0:return t=r,o={type:i.TimelineActionType.setHasDismissedNUX},[4,a.hasDismissedNUX({userId:e.user.id})];case 1:return t.apply(void 0,[(o.hasDismissedNUX=n.sent(),o)]),[2]}})})}}function m(e){var t=this,r=e.direction;return function(s,l){return n.__awaiter(t,void 0,void 0,function(){var t,c,d;return n.__generator(this,function(n){switch(n.label){case 0:return s({type:i.TimelineActionType.setTimelinePaginationLoading,direction:e.direction}),t=o.getTimelineEvents(l()),"processedEvents"in t?(c=t.processedEvents[t.processedEvents.length-1],c.type!==i.TimelineEventType.event?[2]:e.direction!==i.PaginationDirection.future?[3,2]:[4,a.fetchMoreEventsApi({userId:e.user.id,fqpath:e.fqpath,cursorObj:e.futureCursor,direction:r})]):[2];case 1:return d=n.sent(),[3,4];case 2:return[4,a.fetchMoreEventsApi({userId:e.user.id,fqpath:e.fqpath,cursorObj:e.pastCursor,direction:r})];case 3:d=n.sent(),n.label=4;case 4:return s({type:i.TimelineActionType.setTimelinePaginationLoaded,user:e.user,events:d.events||[],cursor:d.has_more?{type:"has-cursor",cursor:d.cursor}:{type:"reached-end"},hasMore:d.has_more||!1,direction:r}),[2]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.dismissNUXAction=l,t.fetchEventCountsAction=c,t.fetchTimelineEventsAction=d,t.initializeTimelineAction=u,t.getNUXState=p,t.showMoreAction=m}),define("modules/clean/react/timeline/data/api",["require","exports","tslib","modules/clean/api_v2/user_client","modules/clean/react/timeline/util","modules/clean/react/timeline/data/types","modules/clean/react/timeline/constants"],function(e,t,n,i,a,r,o){"use strict";function s(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){return t={path:e.fqpath,timestamp:e.timestampInSeconds?e.timestampInSeconds:o.API_TIMESTAMP_NOW},[2,(new i.UserApiV2Client).ns("chronicle").rpc("list_events",t,{subjectUserId:e.user.id})]})})}function l(e){return n.__awaiter(this,void 0,void 0,function(){var t,a,o,s;return n.__generator(this,function(n){return t=e.cursorObj,a=e.fqpath,o=e.direction,s={cursor:t.cursor,path:a,reverse:o===r.PaginationDirection.future},[2,(new i.UserApiV2Client).ns("chronicle").rpc("list_events",s,{subjectUserId:e.userId})]})})}function c(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){if("hourly"===e.aggregation)t={".tag":"hourly"};else{if("daily"!==e.aggregation)return[2,a.assertNever(e.aggregation)];t={".tag":"daily"}}return[2,(new i.UserApiV2Client).ns("chronicle").rpc("get_event_counts",{path:e.fqpath,start_ts:e.startTs,end_ts:e.endTs,aggregation:t},{subjectUserId:e.user.id})]})})}function d(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,(new i.UserApiV2Client).ns("growth").rpc("mark_onboarding_modules_as_completed",{modules:["delorean_rollback"]},{subjectUserId:e.userId})]})})}function u(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return[4,(new i.UserApiV2Client).ns("restorations").rpc("delorean/get_nux_state",void 0,{subjectUserId:e.userId})];case 1:return t=n.sent(),[2,!t.show_rollback_tip]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchEventsApi=s,t.fetchMoreEventsApi=l,t.fetchEventCounts=c,t.markSeenNUX=d,t.hasDismissedNUX=u}),define("modules/clean/react/timeline/data/reducers",["require","exports","tslib","modules/clean/filepath","modules/clean/react/timeline/util","modules/constants/time","modules/clean/react/timeline/util","modules/clean/datetime","modules/core/i18n","modules/clean/react/timeline/data/types","modules/clean/datetime","modules/clean/react/timeline/data/tooltips","modules/clean/browse_interface","modules/core/uri","modules/clean/react/timeline/data/headings"],function(e,t,n,i,a,r,o,s,l,c,d,u,p,m,h){"use strict";function v(e,t,n,v){var f=0;if(e.object_metadata)if(a.isMetadataType(e.object_metadata,"single_object_metadata")||a.isMetadataType(e.object_metadata,"multi_object_metadata")||a.isMetadataType(e.object_metadata,"rename_metadata")||a.isMetadataType(e.object_metadata,"move_metadata"))f=e.object_metadata.contents_count||0;else if(a.isMetadataType(e.object_metadata,"edit_metadata"))f=1;else{if(!a.isMetadataType(e.object_metadata,"other"))return o.assertNever(e.object_metadata);f=1}0===f&&(f=1);var _=1e3*e.ts,g="",T=d.getTimeBands(Date.now());g=_>=T.today?l._("Today",{project:"folder-history"}):_>=T.yesterday?l._("Yesterday",{project:"folder-history"}):_>=T.thisYear?d.nice_date_with_month_name(new Date(_),!1):d.nice_date_with_month_name(new Date(_),!0);var y=a.getLocationOfMetadata(e.object_metadata);y.startsWith(t)&&(y=i.normalize(y.slice(t.length)));var E=y.split("/").filter(function(e){return e.length>0}),b=i.child_dir(y),P=void 0
;P=E.length>1?E.join(" › "):E[0];var w,N=e.actor.account_id===v.id,k=u.getTooltipForEvent({isYou:N,event:e,itemCount:f,path:t,relativeFolderDisplayPath:P}),M=h.getHeadlineForEvent({event:e,itemCount:f,isYou:N});return w=a.isOpType(e.op_type,"delete")?new m.URI({scheme:"https",authority:"www.dropbox.com",path:"/deleted_files"}):p.browse_uri_for_fq_path(v,i.normalize(t+o.getLocationOfMetadata(e.object_metadata))),{type:c.TimelineEventType.event,actor:e.actor,count:f,browseHref:w,humanReadableDate:g,relativeFolderDisplayPath:P,tooltip:k,eventHeadline:M,timestamp:_,displayTooltip:k!==M,folder:b===n?"":b,operationName:a.getNameOfOpType(e.op_type),timeAgo:s.format_date(new Date(_),r.TIME_FORMAT)}}function f(e,t){return"personal"===e.role?t.is_paired?l._("Personal",{project:"folder-history"}):l._("Dropbox",{project:"folder-history"}):t.team_name}function _(e,t){switch(void 0===e&&(e=g),t.type){case c.TimelineActionType.initialize:var a=t.browseContext,r=t.user,s=t.viewer,l=i.normalize(a.currentFQPath),d=f(r,s),u="";return u=""===l?d:i.child_dir(l),n.__assign({},e,{folderDisplayName:u,rootDisplayName:d,folderName:i.child_dir(l),fqpath:l});case c.TimelineActionType.dismissNUX:return n.__assign({},e,{hasDismissedNUX:!0});case c.TimelineActionType.setTimelineEventsLoading:return n.__assign({},e,{timelineEvents:{type:c.TimelineEventState.loadingEntirePanel}});case c.TimelineActionType.setTimelinePaginationLoading:return e.timelineEvents.type===c.TimelineEventState.hasContent?n.__assign({},e,{timelineEvents:n.__assign({},e.timelineEvents,{pageBeingLoaded:t.direction})}):e;case c.TimelineActionType.setTimelineEventsLoaded:case c.TimelineActionType.setTimelinePaginationLoaded:var p=e.timelineEvents.type===c.TimelineEventState.hasContent?e.timelineEvents.rawEvents:[],m=void 0,h={cursorFuture:e.timelineEvents.type===c.TimelineEventState.hasContent?e.timelineEvents.cursorFuture:{type:"never-fetched"},cursorPast:e.timelineEvents.type===c.TimelineEventState.hasContent?e.timelineEvents.cursorPast:{type:"never-fetched"}};t.direction===c.PaginationDirection.future?(m=t.events.concat(p),h.cursorFuture=t.hasMore?t.cursor:{type:"reached-end"}):(m=p.concat(t.events),h.cursorPast=t.hasMore?t.cursor:{type:"reached-end"});for(var _=m.map(function(n){return v(n,e.fqpath,e.folderName,t.user)}),T=[],y=void 0,E=0,b=_;E<b.length;E++){var P=b[E];y&&P.humanReadableDate===y.humanReadableDate||T.push({type:c.TimelineEventType.dateBanner,humanReadableDate:P.humanReadableDate}),T.push(P),y=P}return n.__assign({},e,{timelineEvents:n.__assign({type:c.TimelineEventState.hasContent,pageBeingLoaded:"none",rawEvents:m,processedEvents:T},h)});case c.TimelineActionType.setHasDismissedNUX:return n.__assign({},e,{hasDismissedNUX:t.hasDismissedNUX});case c.TimelineActionType.changeRollbackPageToNone:return n.__assign({},e,{rollbackPanel:{page:c.RollbackPanelPage.notVisible}});case c.TimelineActionType.changeRollbackPageToDayResolutionPage:return n.__assign({},e,{rollbackPanel:{page:c.RollbackPanelPage.dayResolutionPage,contents:{type:"never-loaded"}}});case c.TimelineActionType.changeRollbackPageToNUX:return n.__assign({},e,{rollbackPanel:{page:c.RollbackPanelPage.NUXPage}});case c.TimelineActionType.changeRollbackPageToNUXOrDayResolution:return e.hasDismissedNUX?n.__assign({},e,{rollbackPanel:{page:c.RollbackPanelPage.dayResolutionPage,contents:{type:"never-loaded"}}}):n.__assign({},e,{rollbackPanel:{page:c.RollbackPanelPage.NUXPage}});case c.TimelineActionType.setTimelineEventCountsLoading:return n.__assign({},e,{rollbackPanel:{page:c.RollbackPanelPage.dayResolutionPage,contents:{type:"loading"}}});case c.TimelineActionType.setTimelineEventCountsLoaded:return n.__assign({},e,{rollbackPanel:{page:c.RollbackPanelPage.dayResolutionPage,contents:{type:"loaded",data:t.eventCounts,selectedDateTsInMs:void 0,selectedDateString:void 0}}});case c.TimelineActionType.setRollbackPanelSelectedDate:return e.rollbackPanel.page!==c.RollbackPanelPage.dayResolutionPage||"loaded"!==e.rollbackPanel.contents.type?e:n.__assign({},e,{rollbackPanel:{page:c.RollbackPanelPage.dayResolutionPage,contents:n.__assign({},e.rollbackPanel.contents,{selectedDateTsInMs:t.selectedDateTs,selectedDateString:t.selectedDateString})}});default:return o.assertNever(t),e}}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),a=n.__importStar(a),r=n.__importStar(r);var g={hasDismissedNUX:!1,rollbackPanel:{page:c.RollbackPanelPage.notVisible},folderDisplayName:"",rootDisplayName:"",folderName:"",fqpath:"",timelineEvents:{type:c.TimelineEventState.neverLoaded}};t.getProcessedEvent=v,t.reducer=_}),define("modules/clean/react/timeline/data/selectors",["require","exports","modules/clean/redux/types","modules/clean/redux/selectors"],function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return i.getStateAtNamespace(e,n.TIMELINE_NAMESPACE_KEY)};t.getHasDismissedNUX=function(e){return a(e).hasDismissedNUX},t.getTimelineEvents=function(e){return a(e).timelineEvents},t.getFolderDisplayName=function(e){return a(e).folderDisplayName},t.getPageName=function(e){return a(e).rollbackPanel.page},t.getFQPath=function(e){return a(e).fqpath},t.getRollbackPanelData=function(e){return a(e).rollbackPanel}}),define("modules/clean/react/timeline/data/store",["require","exports","tslib","external/lodash","modules/clean/react/timeline/data/reducers","modules/clean/redux/store","modules/clean/redux/types"],function(e,t,n,i,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),t.getTimelineStore=i.once(function(){return r.getStoreAndRegisterReducers((e={},e[o.TIMELINE_NAMESPACE_KEY]=a.reducer,e));var e})}),define("modules/clean/react/timeline/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.initialize="TIMELINE/initialize",e.dismissNUX="TIMELINE/hide-nux",e.setHasDismissedNUX="TIMELINE/set-has-dismissed-NUX",e.setTimelineEventsLoading="TIMELINE/set-timeline-events-loading",e.setTimelineEventsLoaded="TIMELINE/set-timeline-events-loaded",e.setTimelinePaginationLoading="TIMELINE/set-timeline-events-loading-more",e.setTimelinePaginationLoaded="TIMELINE/set-timeline-events-loaded-more",e.setTimelineEventCountsLoading="TIMELINE/set-timeline-event-counts-loading",e.setTimelineEventCountsLoaded="TIMELINE/set-timeline-event-counts-loaded",e.setRollbackPanelSelectedDate="TIMELINE/set-rollback-panel-selected-date",e.changeRollbackPageToNone="TIMELINE/change-rollback-page-to-none",e.changeRollbackPageToNUX="TIMELINE/change-rollback-page-to-nux",e.changeRollbackPageToNUXOrDayResolution="TIMELINE/change-rollback-page-to-nux-or-day-resolution",e.changeRollbackPageToDayResolutionPage="TIMELINE/change-rollback-page-to-day-resolution-page"})(t.TimelineActionType||(t.TimelineActionType={}));(function(e){e.notVisible="notVisible",e.NUXPage="NUXPage",e.dayResolutionPage="dayResolutionPage"})(t.RollbackPanelPage||(t.RollbackPanelPage={}));(function(e){e.future="future",e.past="past"})(t.PaginationDirection||(t.PaginationDirection={}));(function(e){e.neverLoaded="neverLoaded",e.loadingEntirePanel="loadingEntirePanel",e.hasContent="hasContent"})(t.TimelineEventState||(t.TimelineEventState={}));(function(e){e.event="timeline-event",e.dateBanner="date-banner"})(t.TimelineEventType||(t.TimelineEventType={}))}),define("modules/clean/react/timeline/timeline",["require","exports","tslib","react","external/classnames","modules/clean/history","external/react-redux","modules/clean/react/timeline/data/types","modules/clean/react/timeline/data/selectors","modules/clean/react/css_timing","modules/clean/react/timeline/components/timeline_title","modules/clean/react/timeline/data/actions","modules/core/i18n","modules/clean/react/timeline/components/timeline_event_list","modules/clean/react/timeline/data/store","modules/clean/analytics","spectrum/tabbed_header","modules/clean/react/timeline/util","modules/clean/react/timeline/components/timeline_rollback_panel"],function(e,t,n,i,a,r,o,s,l,c,d,u,p,m,h,v,f,_,g){"use strict";function T(e){return{hasDismissedNUX:l.getHasDismissedNUX(e),timelineEvents:l.getTimelineEvents(e),folderDisplayName:l.getFolderDisplayName(e),rollbackPage:l.getRollbackPanelData(e),fqpath:l.getFQPath(e)}}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),a=n.__importDefault(a),r=n.__importDefault(r);var y=(function(e){function t(t){var i=e.call(this,t)||this;return i.timelineWasOpened=function(){i.setState({restorationsLoggingId:v.RestorationStepsLogger.generate_restore_id(i.props.user.id)}),i.props.dispatch(u.initializeTimelineAction({browseContext:i.props.browseContext,user:i.props.user})),i.props.dispatch(u.fetchTimelineEventsAction({user:i.props.user,fqpath:i.props.browseContext.currentFQPath,direction:s.PaginationDirection.past,timestampInSeconds:0})),i.props.dispatch(u.getNUXState({user:i.props.user})),v.RestorationStepsLogger.log_step({userId:i.props.user.id,restoreId:i.state.restorationsLoggingId,step:"user opened timeline, office only"})},i.onClickOnEvent=function(e){v.RestorationStepsLogger.log_step({userId:i.props.user.id,restoreId:i.state.restorationsLoggingId,step:"user clicked folder history event, office only"})},i.showMoreFuture=function(e){i.props.dispatch(u.showMoreAction({user:i.props.user,fqpath:i.props.browseContext.currentFQPath,futureCursor:e,direction:s.PaginationDirection.future}))},i.showMorePast=function(e){i.props.dispatch(u.showMoreAction({user:i.props.user,fqpath:i.props.browseContext.currentFQPath,pastCursor:e,direction:s.PaginationDirection.past}))},i.updateActiveTabId=function(e){return{type:"View"===e?s.TimelineActionType.changeRollbackPageToNone:s.TimelineActionType.changeRollbackPageToNUXOrDayResolution}},i.state={restorationsLoggingId:v.RestorationStepsLogger.generate_restore_id(t.user.id)},i.propsUpdated(n.__assign({},t,{isTimelineVisible:!1})),i.props.dispatch(u.initializeTimelineAction({browseContext:t.browseContext,user:t.user})),i}return n.__extends(t,e),t.prototype.componentDidUpdate=function(e,t){this.propsUpdated(e)},t.prototype.propsUpdated=function(e){if(this.props.isTimelineVisible&&!e.isTimelineVisible&&this.timelineWasOpened(),e.isTimelineVisible!==this.props.isTimelineVisible){var t=r.default.get_uri().getPath(),n=this.props.isTimelineVisible?{activity:"true"}:{};r.default.push_state(t,n)}},t.prototype.renderActiveTab=function(){return this.props.rollbackPage.page!==s.RollbackPanelPage.notVisible&&this.props.expFolderHistoryRollbacks?this.props.rollbackPage.page===s.RollbackPanelPage.dayResolutionPage||this.props.rollbackPage.page===s.RollbackPanelPage.NUXPage?i.default.createElement(g.TimelineRollbackPanel,{timelineEvents:this.props.timelineEvents,fqpath:this.props.fqpath,user:this.props.user,dispatch:this.props.dispatch,data:this.props.rollbackPage}):_.assertNever(this.props.rollbackPage):i.default.createElement(m.TimelineEventList,{onShowMoreFuture:this.showMoreFuture,onShowMorePast:this.showMorePast,onClickEvent:this.onClickOnEvent,timelineEvents:this.props.timelineEvents,displayShowMoreFuture:!1,displayShowMorePast:!0,isForARollback:!1})},t.prototype.getActiveTabName=function(){switch(this.props.rollbackPage.page){case s.RollbackPanelPage.notVisible:return"View";case s.RollbackPanelPage.dayResolutionPage:case s.RollbackPanelPage.NUXPage:return"Change";default:return _.assertNever(this.props.rollbackPage)}},t.prototype.renderTabHeader=function(){if(this.props.expFolderHistoryRollbacks){var e=this.getActiveTabName();return i.default.createElement(f.TabbedHeader,{className:"timeline-tabbed-header",activeTabId:e,onSelection:this.updateActiveTabId},i.default.createElement(f.Tab,{active:"View"===e,id:"View"},p._("View",{project:"folder-history",comment:"This is the tab panel which will display a list of events in the folder history panel."})),i.default.createElement(f.Tab,{active:"Change"===e,id:"Change"},p._("Change",{project:"folder-history",comment:"This is the tab panel which will allow you to change your folder history by rolling back events."})))}return null},t.prototype.render=function(){var e=a.default({timeline:!0,"timeline--visible":this.props.isTimelineVisible,"timeline--hidden":!this.props.isTimelineVisible});return i.default.createElement("div",{className:e},i.default.createElement(d.TimelineTitle,{hideTimeline:this.props.hideTimeline,displayPath:this.props.folderDisplayName}),this.renderTabHeader(),this.renderActiveTab())},t})(i.default.Component);t.TimelineInnerUnconnected=y;var E=o.connect(T)(y);t.TimelineInnerWithCss=c.requireCssWithComponent(E,["/static/css/timeline/timeline-vflpFBY77.css"]);var b=h.getTimelineStore(),P=(function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(a,e),a.prototype.render=function(){return i.default.createElement(o.Provider,{store:b},i.default.createElement(t.TimelineInnerWithCss,{user:this.props.user,hideTimeline:this.props.hideTimeline,browseContext:this.props.browseContext,isTimelineVisible:this.props.isTimelineVisible,expFolderHistoryRollbacks:this.props.expFolderHistoryRollbacks}))},a})(i.default.Component);t.Timeline=P}),define("modules/clean/react/timeline/util",["require","exports","tslib","modules/clean/filepath"],function(e,t,n,i){"use strict";function a(e){return e}function r(e,t){return e[".tag"]===t}function o(e,t){return e[".tag"]===t}function s(e){return o(e,"add")?"added":o(e,"delete")?"deleted":o(e,"edit")?"edited":o(e,"lost_access")?"lost access":o(e,"mount")?"mounted":o(e,"move")?"moved":o(e,"move_in")?"moved in":o(e,"move_out")?"moved out":o(e,"rename")?"renamed":o(e,"restore")?"restore":o(e,"restore_version")?"restore_version":o(e,"rollback")?"rollback":o(e,"share")?"shared":o(e,"unmount")?"unmounted":o(e,"unshare")?"unshared":o(e,"other")||o(e,"unknown")?"error":a(e)}function l(e){return r(e,"multi_object_metadata")||r(e,"single_object_metadata")||r(e,"edit_metadata")||r(e,"rename_metadata")?i.normalize(e.containing_path):r(e,"move_metadata")?i.normalize(e.to_containing_path):r(e,"other")?"":a(e)}function c(e){return r(e,"single_object_metadata")||r(e,"move_metadata")||r(e,"edit_metadata")?e.name:r(e,"rename_metadata")?e.to_name:r(e,"other")||r(e,"multi_object_metadata")?"":a(e)}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),t.assertNever=a,t.isMetadataType=r,t.isOpType=o,t.getNameOfOpType=s,t.getLocationOfMetadata=l,t.getRepresentativeNameOfMetadata=c});
//# sourceMappingURL=pkg-timeline.min.js-vflu1-RZk.map