define(["require","exports","tslib","react","classnames","external/react-dom","external/lodash","jquery"],function(t,e,o,n,i,s,r,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o.__importDefault(n),i=o.__importDefault(i),s=o.__importStar(s),r=o.__importStar(r),l=o.__importDefault(l);var u;(function(t){t.TOP="TOP",t.BOTTOM="BOTTOM",t.LEFT="LEFT",t.RIGHT="RIGHT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(u||(u={})),e.TooltipPosition=u;var a=function(){var t="tooltip-holder",e=l.default("#"+t);return e.length||(e=l.default("<div />").attr({id:t,style:"z-index: "+1e4}).prependTo("body")),e[0]},p=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.setTooltipBubbleRef=function(t){e.tooltipBubbleRef=t},e.centerAndShow=function(){if(e.tooltipBubbleRef&&e.props.targetRef){var t=l.default(e.tooltipBubbleRef),o=e.props.targetRef.getBoundingClientRect(),n=e.tooltipBubbleRef.getBoundingClientRect(),i=l.default(window).scrollTop(),s=l.default(window).scrollLeft();if([u.TOP,u.BOTTOM].includes(e.props.position)){var r=l.default(window).width(),a=o.left+o.width/2-n.width/2-s;a<0?a=0:a+n.width>r&&(a=r-n.width-7),t.css("left",a+"px")}else if([u.LEFT,u.RIGHT].includes(e.props.position)){var p=l.default(window).height(),d=o.top+o.height/2-n.height/2-i;d<0?d=0:d+n.height>p&&(d=p-n.height-7),t.css("top",d+"px")}t.show()}},e}return o.__extends(e,t),e.prototype.componentDidMount=function(){this.centerAndShow()},e.prototype.componentDidUpdate=function(){this.centerAndShow()},Object.defineProperty(e.prototype,"styles",{get:function(){if(!this.props.targetRef)return{};var t=this.props.targetRef.getBoundingClientRect(),e=l.default(window),o=l.default(window).scrollTop(),n=l.default(window).scrollLeft();switch(this.props.position){case u.TOP:return{bottom:e.height()-t.top+7+o};case u.BOTTOM:return{top:t.bottom+7-o};case u.LEFT:return{right:e.width()-t.left+7+n};case u.RIGHT:return{left:t.right+7-n};case u.BOTTOM_RIGHT:return{left:t.right-7-n,top:t.bottom+7-o}}return{}},enumerable:!0,configurable:!0}),e.prototype.render=function(){return n.default.createElement("div",{className:i.default("tooltip-bubble",this.props.className),ref:this.setTooltipBubbleRef,style:this.styles,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},n.default.createElement("div",{className:"tooltip-inner"},this.props.contents))},e.displayName="TooltipBubble",e})(n.default.Component),d=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={visible:!1,eventId:r.uniqueId()},e.setTargetRef=function(t){e.targetRef=t},e.show=function(){e.state.visible&&!e.lastTimeout||(e.renderTooltip(),e.setState({visible:!0}),e.props.on_show&&e.props.on_show(),e.clearTimeout())},e.hide=function(){if(e.state.visible||e.lastTimeout){var t=a();if(e.lastTimeout){l.default(t).attr("data-event-id")===e.state.eventId&&s.unmountComponentAtNode(t)}else s.unmountComponentAtNode(t);e.setState({visible:!1})}},e.scheduleShow=function(){e.clearTimeout(),e.lastTimeout=setTimeout(e.show,e.props.show_delay)},e.scheduleHide=function(){e.clearTimeout(),e.lastTimeout=setTimeout(e.hide,e.props.hide_delay)},e.clearTimeout=function(){e.lastTimeout&&(clearTimeout(e.lastTimeout),e.lastTimeout=null)},e.onMouseEnter=function(){e.props.show_delay?e.scheduleShow():e.show()},e.onMouseLeave=function(){e.props.hide_delay?e.scheduleHide():e.hide()},e.renderTooltip=function(){var t=a();l.default("#tooltip-holder").css("position","fixed"),l.default("#tooltip-holder").css("left","0"),l.default("#tooltip-holder").css("right","0"),e.props.hide_delay&&l.default("#tooltip-holder").attr("data-event-id",e.state.eventId),e.props.position===u.TOP?(l.default("#tooltip-holder").css("top","auto"),l.default("#tooltip-holder").css("bottom","0")):(l.default("#tooltip-holder").css("top","0"),l.default("#tooltip-holder").css("bottom","auto"));var o=n.default.createElement(p,{position:e.props.position,contents:e.props.tooltip_contents,className:e.props.tooltip_classname,onMouseMove:e.props.interaction_enabled?e.clearTimeout:void 0,onMouseEnter:e.props.interaction_enabled?e.onMouseEnter:void 0,onMouseLeave:e.props.interaction_enabled?e.onMouseLeave:void 0,targetRef:e.targetRef});s.unmountComponentAtNode(t),s.render(o,t)},e}return o.__extends(e,t),e.prototype.componentDidMount=function(){l.default(document).bind("scroll."+this.state.eventId,this.hide)},e.prototype.componentDidUpdate=function(){this.state.visible&&this.renderTooltip()},e.prototype.componentWillUnmount=function(){l.default(document).unbind("scroll."+this.state.eventId);var t=a();s.unmountComponentAtNode(t)},e.prototype.render=function(){return n.default.createElement("div",{className:"tooltip-target",onFocus:this.onMouseEnter,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onBlur:this.onMouseLeave,id:this.state.eventId,ref:this.setTargetRef,tabIndex:this.props.is_focusable?0:void 0},this.props.children)},e.displayName="Tooltip",e})(n.default.Component);e.Tooltip=d});
//# sourceMappingURL=tooltip.min.js-vflVTnzP_.map