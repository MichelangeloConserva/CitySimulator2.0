define("modules/clean/business/components/business_comparison_matrix",["require","exports","tslib","external/lodash","jquery"],function(e,t,a,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=a.__importStar(i),s=a.__importDefault(s);var n=(function(){function e(e,t){var a=this;this.handleChange=function(e){if(!e&&window.requestAnimationFrame)window.requestAnimationFrame(function(){a.handleChange(!0)});else{var t=0;a.headerIsFixed&&(t=s.default(".supernav__container").height());var i=a.$stickyHeader.outerHeight(),n=a.$window.scrollTop(),o=a.$compareTable.position().top-n-t,r=a.$lastHeader.position().top-n-i-t+8,c="";if(o<0){if(r>0){a.$compareTable.addClass("sticky");var l=Math.min(-o,a.$compareTable.height()-i);c="translateY("+l+"px)"}}else c="translateY(0)",a.$compareTable.removeClass("sticky");a.$stickyHeader.css({transform:c,"-webkit-transform":c,"-ms-transform":c})}},this.headerIsFixed=!!t,this.$window=s.default(window),this.$compareTable=s.default(e),this.$lastHeader=this.$compareTable.find('[class*="breakdown__header"]').last(),this.$stickyHeader=this.$compareTable.find("thead"),this.$window.on("scroll",function(e){a.handleChange(!1)});var n=i.throttle(this.handleChange,25);this.$window.on("resize",function(e){n(!1)}),s.default(this.handleChange)}return e})();t.StickyComparisonMatrix=n}),define("modules/clean/business/computer_carousel",["require","exports","tslib","jquery","external/lodash"],function(e,t,a,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=a.__importDefault(i),s=a.__importStar(s);var n=(function(e){var t=e.createElement("div");return t.style.hasOwnProperty("transition")?"transitionend":t.style.hasOwnProperty("WebkitTransition")?"webkitTransitionEnd":t.style.hasOwnProperty("MozTransition")?"transitionend":t.style.hasOwnProperty("OTransition")?"oTransitionEnd":"transitionend"})(document),o=(function(){function e(e){var t=this;this.onDocumentReady=function(){t.$window.on("resize",s.debounce(t.resizeCarouselHeight,500)),t.$bullets.on("click",t.onBulletClick),t.$carousel.find(".benefits-carousel__arrow").on("click",t.onArrowClick),t.resizeCarouselHeight()},this.onBulletClick=function(e){var a=i.default(e.currentTarget),s=parseInt(a.attr("data-index"),10);t.changeActiveElement(s)},this.onArrowClick=function(e){e.preventDefault();var a,i=t.currentIndex;a=i===t.$bullets.length-1?0:i+1,t.changeActiveElement(a)},this.resizeCarouselHeight=function(){var e=0;t.$copyList.find(".copy-item").each(function(){var t=i.default(this).height();t>e&&(e=t)}),t.$copyList.height(e)},this.translateX=function(e,t){var a="translateX(-"+t+"%)";e.css({"-webkit-transform":a,"-ms-transform":a,transform:a})},this.changeActiveElementFn=function(e){if(t.currentIndex!==e){var a=t.currentIndex;t.$carousel.find(".active").removeClass("active"),t.bindItemsTransition(t.$copyList,t.$copyList.find(".copy-item"),e),t.bindItemsTransition(t.$imageList,t.$imageList.find(".image-item"),e),i.default(".benefits-carousel__gradient").removeClass("benefits-carousel__gradient--"+t.gradientMap[a]).addClass("benefits-carousel__gradient--"+t.gradientMap[e]),t.$bulletList.find("[data-index="+e+"]").addClass("active")}},this.bindItemsTransition=function(e,a,i){var s=!1;a.one(n,function(n){var o=n.originalEvent.propertyName;if(t.elementTransitions.indexOf(o)>-1&&!s){s=!0;var r=a.length,c=0;i<=r-1&&(c=i/r*100),t.translateX(e,c),e.find("[data-index="+i+"]").addClass("active")}})},this.$window=i.default(window),this.$carousel=i.default(e.idSelector),this.$imageList=this.$carousel.find(".image-list"),this.$copyList=this.$carousel.find(".copy-list"),this.$bulletList=this.$carousel.find(".bullet-list"),this.$bullets=this.$carousel.find(".bullet"),this._currentIndex=0,this.changeActiveElement=s.throttle(this.changeActiveElementFn,1e3),this.gradientMap=["orange","blue","yellow"],e.gradientMap&&e.gradientMap.length&&(this.gradientMap=e.gradientMap),this.elementTransitions=["opacity","bottom"],i.default(document).ready(this.onDocumentReady)}return Object.defineProperty(e.prototype,"currentIndex",{get:function(){var e=this.$bulletList.find(".active").attr("data-index");return e?(this._currentIndex=parseInt(e,10),this._currentIndex):this._currentIndex},enumerable:!0,configurable:!0}),e})();t.ComputerCarousel=o}),define("modules/clean/expanding_section",["require","exports","tslib","jquery","modules/clean/analytics"],function(e,t,a,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=a.__importDefault(i),s=a.__importStar(s);var n=(function(){function e(e,t,a,s,n){this.$parent=i.default("#"+e),t&&(this.$scrollElement=i.default(""+t)),this.scrollElementOffset=a||0,this.expandingSectionAnalyticsId=s,this.defaultOffset=95,this.toggledState=!1,this.$toggleButton=n?i.default("#"+n):this.$parent.find(".expanding-section__button"),this.$closeButton=this.$parent.find(".expanding-section__button-close"),this._setupClickHandlers()}return e.prototype._setupClickHandlers=function(){var e=this,t=function(t){t.preventDefault(),e._scrollToSection(),e._expandSection(),e.expandingSectionAnalyticsId&&e._logAnalyticsTracking()},a=function(t){t.preventDefault(),e._expandSection()};this.$toggleButton.on("click",t),this.$closeButton.length>0&&this.$closeButton.on("click",a)},e.prototype._scrollToSection=function(){var e=this.$parent.offset().top-this.scrollElementOffset-this.defaultOffset;this.$scrollElement&&(e=this.$parent.find(this.$scrollElement).offset().top-this.scrollElementOffset),this.toggledState||i.default("html, body").animate({scrollTop:e})},e.prototype._expandSection=function(){var e=0;this.toggledState?(e=0,this.toggledState=!1):(e=this.$parent.find(".expanding-section__content-container").outerHeight(!0),this.toggledState=!0),this.$parent.find(".expanding-section__content").css("max-height",e),this.$toggleButton.blur().toggleClass("button-toggled").attr("aria-expanded",JSON.stringify(this.toggledState))},e.prototype._logAnalyticsTracking=function(){s.TeamsWebActionsLogger.log(this.expandingSectionAnalyticsId)},e})();t.ExpandingSection=n}),define("modules/clean/legacy_pyxl_controllers/accordion",["require","exports","tslib","jquery","modules/core/browser"],function(e,t,a,i,s){"use strict";function n(){i.default(".accordion-list__item").on("click",function(e){i.default(e.currentTarget).addClass("active").siblings().removeClass("active")}),i.default(".accordion-list__item--closeable .accordion-list__heading").on("click",function(e){var t=i.default(e.currentTarget).parent();t.hasClass("active")&&(t.removeClass("active"),e.stopPropagation())});var e=s.get_hash();e&&(i.default("html, body").animate({scrollTop:i.default(e).offset().top-100},600),i.default(e).addClass("active").siblings().removeClass("active"))}Object.defineProperty(t,"__esModule",{value:!0}),i=a.__importDefault(i),s=a.__importStar(s),t.Accordion=n}),define("modules/clean/snapengage",["require","exports","tslib","jquery","modules/clean/ncct/manual_assist_util","modules/core/browser","modules/core/cookies","modules/core/uri","modules/clean/ajax","modules/clean/analytics","modules/clean/web_timing_logger","modules/clean/css","modules/clean/stormcrow/experiment","modules/clean/stormcrow/stormcrow_exposure_logger"],function(e,t,a,i,s,n,o,r,c,l,p,h,d,g){"use strict";function u(e){var t=e.experiment,a=t.name,i=t.variant,s=e.whitelist;if(i&&(n=d.Experiment(i)).variantIn.apply(n,s)){(new g.StormcrowExposureLogger).logExposure(a,i);var n}}function m(e){e.resume?t.DropboxSnapEngage.resume(e.params):(t.DropboxSnapEngage.registerExperiments(e.experiments),t.DropboxSnapEngage.init(e.params))}Object.defineProperty(t,"__esModule",{value:!0}),i=a.__importDefault(i),n=a.__importStar(n);var f=(function(){function e(){var e=this;this.chatData={FirstName:"",LastName:"",Email:"",SessionID:"",Country:"",MktoInfo:"",pricing:void 0,user_id:"",proactiveMessage:"",proactiveAgentName:"",visitorFirstTimeVisitor:"",visitorAmountOfPreviousChats:"",visitorAmountOfPagesVisited:"",visitorTimeOnSite:"",visitorTimeOnPage:"",pageLoadTs:"",chatHmac:"",ncct:"",serviceTier:"",tags:"",phoneSupportForPlusUsers:void 0,supportExperimentShowOnboardingNumber:void 0,supportExperimentHideEmailOption:void 0,supportExperimentBasic36HourSla:void 0,phoneSupportForProfessionalUsers:void 0,supportExperimentProfessionalPhoneSupportedLanguages:void 0},this.chatRequested=!1,this.experiments={},this.loaded=!1,this.ttiFallbackTimeout=1e4,this.updateChatData=function(){e.sendMessage({message_type:"UpdateChatData",chatData:e.chatData}),e.sendMessage({message_type:"AllowProactiveChat",allowProactiveChat:e.allowProactiveChat})},this.handleIframeLoad=function(){l.TeamsWebActionsLogger.log("snapengage_loaded",{total_time:(new Date).valueOf()-e.startTime.valueOf()}),e.loaded=!0;var t=e.getSnapEngageIframe();e.iFrameLeftStyle=t&&t.style.left,!e.supportChatId&&e.filterSSAProactiveChat&&(e.allowProactiveChat=!1),e.sendMessage({message_type:"createSnapEngageScript",chatId:e.supportChatId,allowProactiveChat:e.allowProactiveChat,chatData:e.chatData}),e.getChatVisibleCookie()&&e.showSnapEngageIframe(!0)},this.checkChatStatus=function(){e.chatRequested||e.sendMessage({message_type:"checkChatStatus",chatData:e.chatData,isSupport:void 0!==e.supportChatId})},this.receiveMessage=function(t){e.validOriginURL(t.origin)&&("Close"===t.data.message_type?(e.hideSnapEngageIframe(),e.chatRequested=!1,e.logCloseEvent(t.data)):"Minimize"===t.data.message_type?e.minimizeSnapEngageIframe(t.data.rect):"Maximize"===t.data.message_type?e.maximizeSnapEngageIframe(t.data.rect):"ChatMessageReceived"===t.data.message_type?e.showSnapEngageIframe():"Open"===t.data.message_type?!s.isSupportChat()&&n.get_uri().toString().indexOf("/team/admin/help")>=0?(l.TeamsWebActionsLogger.log("forced_ncct_chat_close"),e.sendMessage({message_type:"EndChat",chatData:e.chatData})):(e.chatRequested=!0,e.showSnapEngageIframe(),e.updateChatStatus(!0)):"OpenProactive"===t.data.message_type?s.isNCCTChat(e.supportChatId)?e.maybeShowProactive():(e.showAndLogProactiveChat(),u({experiment:e.constructExperimentObject("growth_db_plans_web_chat"),whitelist:["V1"]})):"EndProactiveChat"===t.data.message_type?(e.hideSnapEngageIframe(),e.chatRequested=!1,l.TeamsWebActionsLogger.log("proactive_chat_ended")):"StartChat"===t.data.message_type?(e.setChatVisibleCookie(t.data.chatId),"proactive"===t.data.type?(s.isNCCTChat(e.supportChatId)&&c.WebRequest({url:"/team/admin/engaged_chat",data:{chatId:e.supportChatId}}),l.TeamsWebActionsLogger.log("proactive_chat_initiated")):"manual"===t.data.type&&l.TeamsWebActionsLogger.log("reactive_chat_initiated")):"UpdateChatStatus"===t.data.message_type?e.updateChatStatus(t.data.online):"SnapEngageInitialized"===t.data.message_type&&(e.getChatVisibleCookie()?(e.supportChatId&&e.sendMessage({message_type:"updateHmac",chatData:e.chatData}),e.showSnapEngageIframe(),e.sendMessage({message_type:"checkResize"})):"V2"!==e.getExperimentVariant("portkey_chat_discoverability")||e.allowProactiveChat||e.startMinimizeChat()))},this.constructExperimentObject=function(t){return{name:t,variant:e.getExperimentVariant(t)}},this.showAndLogProactiveChat=function(){e.chatRequested=!0,e.showSnapEngageIframe(),l.TeamsWebActionsLogger.log("proactive_chat_opened")}}return e.prototype.registerExperiments=function(e){for(var t in e)e.hasOwnProperty(t)&&(this.experiments[t]=e[t])},e.prototype.resume=function(e){var t=this;top===window&&(l.TeamsWebActionsLogger.log("chat_persistence_init"),p.waitForTTI({timeoutMS:this.ttiFallbackTimeout}).then(function(){t._resume(e)}))},e.prototype._resume=function(e){this.cookieName=e.cookieName,this.cookieDomain=e.cookieDomain;var t=this.getChatVisibleCookie();!this.inflight&&t&&(l.TeamsWebActionsLogger.log("chat_persistence"),this.initializeParams(e),this.pageInit())},e.prototype.pageInit=function(){var e=this;window.addEventListener("message",this.receiveMessage,!1),this.inflight=h.require_css("/static/css/business/components/snap_engage-vflHMkaGM.css",function(){e.createIframe()})},e.prototype.init=function(e){this.initializeParams(e),this.inflight?this.inflight.then(this.updateChatData):this.pageInit()},e.prototype.initializeParams=function(e){this.cookieName=e.cookieName,this.cookieDomain=e.cookieDomain,this.snapEngageIframeOrigin=e.snapEngageIframeOrigin,this.chatData={FirstName:e.firstName,LastName:e.lastName,Email:e.email,SessionID:e.sessionId,Country:e.countryCode,MktoInfo:e.marketoInfo,pricing:this.chatData.pricing,user_id:e.userId,proactiveMessage:"",proactiveAgentName:"",visitorFirstTimeVisitor:"",visitorAmountOfPreviousChats:"",visitorAmountOfPagesVisited:"",visitorTimeOnSite:"",visitorTimeOnPage:"",pageLoadTs:e.pageLoadTs,chatHmac:e.chatHmac,ncct:this.getExperimentVariant("subgrowth_biz_no_cc_trials_team_based")||this.getExperimentVariant("subgrowth_biz_no_cc_trials")||"OFF",serviceTier:e.serviceTier,tags:e.tags,phoneSupportForPlusUsers:e.phoneSupportForPlusUsers,supportExperimentShowOnboardingNumber:e.supportExperimentShowOnboardingNumber,supportExperimentHideEmailOption:e.supportExperimentHideEmailOption,supportExperimentBasic36HourSla:e.supportExperimentBasic36HourSla,phoneSupportForProfessionalUsers:e.phoneSupportForProfessionalUsers,supportExperimentProfessionalPhoneSupportedLanguages:e.supportExperimentProfessionalPhoneSupportedLanguages},this.isVisible=!1,this.iFrameLeftStyle=null,this.allowProactiveChat=e.allowProactiveChat,this.supportChatId=e.supportChatId,this.filterSSAProactiveChat=e.filterSSAProactiveChat,this.registerPricingsAsDisplayed(e.pricings),this.startTime=new Date},e.prototype.startSupportChat=function(e){s.isNCCTChat(e)?c.WebRequest({url:"/team/admin/engaged_chat",data:{chatId:e}}):s.markSupportChatStarted(),this.chatRequested=!0,l.TeamsWebActionsLogger.log("support_chat_initiated"),this.showSnapEngageIframe(),this.sendMessage({message_type:"startSupportChat",chatData:this.chatData,support_widget_id:e})},e.prototype.startReactiveChat=function(){this.chatRequested||(this.chatRequested=!0,l.TeamsWebActionsLogger.log("chat_initiated"),this.showSnapEngageIframe(),this.sendMessage({message_type:"StartChat",chatData:this.chatData}))},e.prototype.startMinimizeChat=function(){this.chatRequested||(this.chatRequested=!0,this.showSnapEngageIframe(),l.TeamsWebActionsLogger.log("chat_discoverability_minimize_chat_show"))},e.prototype.registerPricingsAsDisplayed=function(e){var t=this;if(void 0!==e&&0!==e.length){var a=e.map(function(e){var a=e.product+" "+e.country+"v"+e.price_version+" "+e.price,i=t.getNumberOfLicenses(e.licenses);return 1===i?a+=" (1 license)":i>1&&(a=a+" ("+i+" licenses_count)"),a});this.chatData.pricing=a.join(),this.loaded&&this.sendMessage({message_type:"checkChatStatus",chatData:this.chatData,isSupport:void 0!==this.supportChatId})}},e.prototype.createIframe=function(){var e=n.get_uri(),t=r.URI.parse(this.snapEngageIframeOrigin),a=document.createElement("iframe");return e.setScheme(t.getScheme()),e.setAuthority(t.getAuthority()),a.src=e.toString(),a.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups allow-forms"),a.setAttribute("class","snapengage-iframe"),a.setAttribute("id","snapengage-iframe"),a.setAttribute("allowTransparency","true"),a.addEventListener("load",this.handleIframeLoad),document.body.insertBefore(a,document.body.childNodes[0]),setInterval(this.checkChatStatus,13e4),a},e.prototype.sendMessage=function(e){var t=this.getSnapEngageIframe();t&&t.contentWindow&&t.contentWindow.postMessage(e,this.snapEngageIframeOrigin)},e.prototype.maybeShowProactive=function(){if(s.canShowProactiveChat()&&this.allowProactiveChat){var e=this.constructExperimentObject("subgrowth_biz_manual_assist_chat");u({experiment:e,whitelist:["CONTROL","V1"]}),"V1"===e.variant&&(this.showAndLogProactiveChat(),c.WebRequest({url:"/team/admin/prompted_chat",data:{chatId:this.supportChatId}}))}},e.prototype.validOriginURL=function(e){return e===this.snapEngageIframeOrigin},e.prototype.getSnapEngageIframe=function(){return document.getElementById("snapengage-iframe")},e.prototype.updateChatStatus=function(e){i.default("[data-snap-engage-visibility]").hide(),e?i.default('[data-snap-engage-visibility="online"]').show():i.default('[data-snap-engage-visibility="offline"]').show()},e.prototype.showSnapEngageIframe=function(e){void 0===e&&(e=!1);var t=this.getSnapEngageIframe();t&&(t.style.display="inline",t.style.left=e?"99999px":this.iFrameLeftStyle,this.isVisible=!0)},e.prototype.hideSnapEngageIframe=function(){this.isVisible=!1,this.resetChatVisibleCookie(),this.getSnapEngageIframe()&&(this.getSnapEngageIframe().style.display="none")},e.prototype.minimizeSnapEngageIframe=function(e){this.getSnapEngageIframe()&&this.isVisible&&(this.getSnapEngageIframe().style.width=Math.max(e.width,80)+"px",this.getSnapEngageIframe().style.height=Math.max(e.height,80)+"px")},e.prototype.maximizeSnapEngageIframe=function(e){if(this.getSnapEngageIframe()){var t=(e||{}).width,a=(e||{}).height;this.getSnapEngageIframe().style.width=t?t+"px":"",this.getSnapEngageIframe().style.height=a?a+"px":""}},e.prototype.getChatVisibleCookie=function(){return!!this.cookieName&&o.Cookies.read(this.cookieName)},e.prototype.setChatVisibleCookie=function(e){this.cookieName&&this.cookieDomain&&o.Cookies.create(this.cookieName,e,1,this.cookieDomain)},e.prototype.resetChatVisibleCookie=function(){this.cookieName&&o.Cookies.delete(this.cookieName)},e.prototype.getExperimentVariant=function(e){return this.experiments.hasOwnProperty(e)?this.experiments[e]:void 0},e.prototype.getNumberOfLicenses=function(e){var t=this.getExperimentVariant("subgrowth_biz_payment_no_min_license");return"MIN2"===t?2:"MIN3"===t?3:"MIN3B"===t?3:e},e.prototype.logCloseEvent=function(e){if("Close"===e.message_type){var t=e.type,a=e.agent_status;l.TeamsWebActionsLogger.log("snapengage_chat_close",{type:t,agent_status:a})}},e})();t.DropboxSnapEngageSingleton=f,t.DropboxSnapEngage=new f,t.initialize_module=m});
//# sourceMappingURL=pkg-legacy-av.min.js-vflowmIPC.map