define("modules/clean/user_education/react/user_education_effect",["require","exports","tslib","external/react-dom","react","modules/clean/user_education/user_education_interface","modules/clean/user_education/user_education_client"],function(e,t,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),o=n.__importDefault(o);var s=(function(){function e(e,t){this._thunk=e,this._fps=t,this._cleanup_func=function(){},this._is_running=!1}return e.prototype.start=function(){if(!this._is_running){this._is_running=!0;var e=this._thunk,t=-1,n=-1,i=1e3/this._fps,o=function(e,t){var r=Date.now(),a=r-t;a>i&&e(),t=r-a%i,n=requestAnimationFrame(function(){return o(e,t)})};t=requestAnimationFrame(function(){o(e,0)}),this._cleanup_func=function(){cancelAnimationFrame(t),cancelAnimationFrame(n)}}},e.prototype.stop=function(){this._is_running&&(this._is_running=!1,this._cleanup_func())},e.prototype.isRunning=function(){return this._is_running},e})(),u=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={effect:null},n.handleUpdate=n.handleUpdate.bind(n),n._updateSize=n._updateSize.bind(n),n}return n.__extends(t,e),t.prototype.componentDidMount=function(){a.eventEmitter.on(r.UserEducationStateChannel,this.handleUpdate,this),a.UEClient.sendEvent(this.props.containerName+"."+this.props.name,r.UEEventType.Subscribe,{}),a.UEClient.sendEvent(this.props.containerName,this.props.name+".componentDidMount",{}),this._updateSize()},t.prototype.componentDidUpdate=function(){this._updateSize()},t.prototype._updateSize=function(){if(this.state.effect){var e=i.findDOMNode(this.refs.container);if(e){var t=e.getBoundingClientRect();this._requestEffect(t)}}},t.prototype._requestEffect=function(e){this.state.effect&&a.eventEmitter.emit(r.UserEducationEffectChannel,{requester:this.props.containerName+"."+this.props.name,rect:e})},t.prototype.componentWillUnmount=function(){this.stopRectUpdateLoop(),a.eventEmitter.removeListener(r.UserEducationStateChannel,this.handleUpdate,this),this._requestEffect({bottom:0,height:0,left:0,right:0,top:-1e3,width:0})},t.prototype.startRectUpdateLoop=function(){this._boundaryPoller?this._boundaryPoller.isRunning()||this._boundaryPoller.start():(this._boundaryPoller=new s(this._updateSize,15),this._boundaryPoller.start())},t.prototype.stopRectUpdateLoop=function(){this._boundaryPoller&&this._boundaryPoller.stop()},t.prototype.handleUpdate=function(e){if(e.state===r.UEEventType.ShowStep){var t=e.step.effect||null;if(t&&t.containerName===this.props.containerName&&t.elementName===this.props.name)return this.startRectUpdateLoop(),void this.setState({effect:t})}null!=this.state.effect&&(this.stopRectUpdateLoop(),this.setState({effect:null}))},t.prototype.render=function(){var e="ue-effect-container uee-"+this.props.containerName+"-"+this.props.name;return this.props.useSpan?o.default.createElement("span",{ref:"container",className:e},this.props.children):o.default.createElement("div",{ref:"container",className:e},this.props.children)},t.displayName="UserEducationEffect",t})(o.default.Component);t.UserEducationEffect=u}),define("modules/clean/user_education/user_education_client",["require","exports","tslib","external/eventemitter3","modules/clean/user_education/user_education_interface"],function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),window.ensemble&&!window.ensemble.eventEmitter&&(window.ensemble.eventEmitter=new i.default),t.eventEmitter=window.ensemble&&window.ensemble.eventEmitter?window.ensemble.eventEmitter:new i.default;var r=(function(){function e(){this.controllerReady=!1,this.eventQueue=[],this.stepCallback={},this.handleUpdate=this.handleUpdate.bind(this),t.eventEmitter.on(o.UserEducationStateChannel,this.handleUpdate,this)}return e.prototype.init=function(){this._sendEvent({containerName:"UEClient",name:o.UEEventType.Subscribe,data:{}})},e.prototype.sendEvent=function(e,t,n){if(void 0===n&&(n={}),!this._isUserEducationDisabled()){var i={containerName:e,name:t,data:n};this.controllerReady?this._sendEvent(i):this.eventQueue.push(i)}},e.prototype._sendEvent=function(e){this._isUserEducationDisabled()||(this._shouldSendEventAsynchronously()?setTimeout(function(){return t.eventEmitter.emit(o.UserEducationEventChannel,e)},0):t.eventEmitter.emit(o.UserEducationEventChannel,e))},e.prototype._isUserEducationDisabled=function(){return!window.ensemble},e.prototype._shouldSendEventAsynchronously=function(){return!0},e.prototype._registerCallbackForEducationStep=function(e,t,n){var i=this._getKeyForStepCallback(e,t);void 0===this.stepCallback[i]&&(this.stepCallback[i]=[]),this.stepCallback[i].push(n)},e.prototype.registerCallbackForEducationStep=function(e,t,n){this._registerCallbackForEducationStep(e,t,n),this.sendEvent("UEClientCallback",o.UEEventType.Subscribe)},e.prototype.registerBulkCallbackForEducationStep=function(e,t){var n=this;e.forEach(function(e){n._registerCallbackForEducationStep(e.moduleName,e.stepName,t)}),this.sendEvent("UEClientCallback",o.UEEventType.Subscribe)},e.prototype._getKeyForStepCallback=function(e,t){return e+"."+t},e.prototype.handleUpdate=function(e){if(e.state!==o.UEEventType.Ready||this.controllerReady){if(e.state===o.UEEventType.ShowStep&&e.step.name){var t=this._getKeyForStepCallback(e.moduleName,e.step.name);if(this.stepCallback[t]){for(var n=0,i=this.stepCallback[t];n<i.length;n++){var r=i[n];r()}delete this.stepCallback[t]}}}else for(this.controllerReady=!0;this.eventQueue.length>0;){var a=this.eventQueue.shift();a&&this._sendEvent(a)}},e.prototype.sendError=function(e){t.eventEmitter.emit(o.UserEducationErrorChannel,e)},e})();t.UserEducationClient=r,t.UEClient=new r,t.UEClient.init()}),define("modules/clean/user_education/user_education_interface",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserEducationEventChannel="UE.event",t.UserEducationStateChannel="UE.state",t.UserEducationEffectChannel="UE.effect",t.UserEducationErrorChannel="UE.error";var n={Ready:"Ready",ShowStep:"ShowStep",Finished:"Finished",Subscribe:"Subscribe"};t.UEEventType=n;(function(e){e.EFFECT_TARGET_NOT_FOUND="effect_target_not_found",e.REDIRECT_FAILED="redirect_failed"})(t.UserEducationErrorType||(t.UserEducationErrorType={}));(function(e){e[e.Spotlight=0]="Spotlight",e[e.Pulsar=1]="Pulsar",e[e.ToolTip=2]="ToolTip",e[e.Modal=3]="Modal"})(t.UEEffectType||(t.UEEffectType={}));(function(e){e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large",e[e.XLarge=4]="XLarge"})(t.UserEducationSpotlightSize||(t.UserEducationSpotlightSize={}));t.UserEducationPulsarSize=24;(function(e){e[e.Center=1]="Center",e[e.LeftCenter=2]="LeftCenter",e[e.RightCenter=3]="RightCenter"})(t.UserEducationEffectPosition||(t.UserEducationEffectPosition={}));var i;(function(e){e[e.TopLeft=1]="TopLeft",e[e.TopRight=2]="TopRight"})(i||(i={})),t.UserEducationToolTipPointerPosition=i});
//# sourceMappingURL=pkg-user-education-client.min.js-vflZ1N2KD.map