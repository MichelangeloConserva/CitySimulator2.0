define(["require","exports","tslib","modules/clean/open_with","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/open_button/types","modules/clean/react/file_viewer/unity/unity_utils","modules/clean/react/file_viewer/utils","modules/clean/react/paper/utils","modules/clean/react/file_viewer/data/actions","modules/core/i18n","modules/clean/integrations/slack_modal","modules/clean/api_v2/default_user_client"],function(e,n,t,i,r,o,s,l,a,u,p,c,d){"use strict";function f(e){var n=e.file,t=e.hasOpenInPaperSupport,i=e.isUnityDisabled,s=e.isOpenWithDisabled,a=e.unityInfo,f=e.extraOptions,w=e.user,I=e.isSlackEnabled;if(!a)return[];var D=[];t&&D.push({handler:v({file:n,user:w}),spriteName:"paper",text:p._("Copy to Paper"),type:o.OpenButtonAction.OPEN_IN_PAPER,userAction:r.UserAction.CopyToPaper}),h({isUnityDisabled:i,unityInfo:a})&&D.push({handler:A({file:n,user:w,isFolder:!1}),spriteName:"ow_desktop",text:y(a),type:o.OpenButtonAction.UNITY_FILE,userAction:r.UserAction.OpenInUnity});var b=l.OpenWithHelpers.getOpenWithHandlerData(n,w);return O({file:n,isOpenWithDisabled:s,user:w})&&b&&D.push({handler:U({file:n,user:w}),spriteName:b.icon,text:b.name,type:o.OpenButtonAction.OPEN_WITH,userAction:r.UserAction.OpenInOfficeOnline}),_({isUnityDisabled:i,unityInfo:a})&&D.push({handler:A({file:n,user:w,isFolder:!0}),spriteName:"ow_folder",text:m(a),type:o.OpenButtonAction.UNITY_FOLDER,userAction:r.UserAction.OpenInUnityFolder}),f&&f.forEach(function(e){e&&D.push(e)}),D.length||D.push({handler:function(){return u.download(n)},spriteName:null,text:p._("Download"),type:o.OpenButtonAction.DOWNLOAD,userAction:r.UserAction.Download}),I&&D.push({handler:function(){return c.showShareToSlackModal(new d.DefaultUserApiV2Client(w),n.file_id)},spriteName:null,text:p._("Share to Slack"),type:o.OpenButtonAction.SHARE_TO_SLACK,userAction:r.UserAction.ShareToSlack}),D}function _(e){var n=e.isUnityDisabled,t=e.unityInfo;return!n&&s.UnityHelpers.isUnityFolderSupported(t)}function h(e){var n=e.isUnityDisabled,t=e.unityInfo;return!n&&s.UnityHelpers.isUnityFileSupported(t)}function O(e){var n=e.file,t=e.isOpenWithDisabled,i=e.user;return!t&&l.OpenWithHelpers.canOpenWith(n,i)}function y(e){var n=(e?e.open_application_name:void 0)||p._("Desktop");return p._("Open in %(app_name)s").format({app_name:n})}function m(e){var n=(null!==e?e.file_browser_display_name:void 0)||p._("File Browser");return p._("Show in %(file_browser)s").format({file_browser:n})}function A(e){var n=e.file,t=e.isFolder,i=e.user;return function(){s.UnityHelpers.openFile(n.ns_id,n.ns_path,i.id,t)}}function U(e){var n=e.file,t=e.user;return function(){l.OpenWithHelpers.openWith(n,t)}}function v(e){var n=e.file,t=e.user;return function(){a.openFileInPaper({file:n,user:t})}}function w(e,n){var t=e.map(function(e){return e.type}).includes(o.OpenButtonAction.UNITY_FILE),r=n&&i.default.is_adobe_app(n.open_application_identifier),s=e.map(function(e){return e.type}).includes(o.OpenButtonAction.OPEN_WITH);return t&&r||s}Object.defineProperty(n,"__esModule",{value:!0}),i=t.__importDefault(i),n.getOpenOptions=f,n.shouldShowCoachmark=w});
//# sourceMappingURL=utils.min.js-vflzXEoZk.map