define("modules/clean/flux/flux_store",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function e(e){this._listeners=[],this._dispatcher=e,this._dispatchToken=this._dispatcher.register(this.__invokeOnDispatch.bind(this)),this.__hasChanged=!1}return e.prototype.teardown=function(){this._dispatcher.unregister(this._dispatchToken)},e.prototype.getDispatcher=function(){return this._dispatcher},e.prototype.getDispatchToken=function(){return this._dispatchToken},e.prototype.addListener=function(e){var t=this;return this._listeners.push(e),function(){return t._listeners=Array.from(t._listeners).filter(function(t){return t!==e})}},e.prototype.hasChanged=function(){return this.__hasChanged},e.prototype.__emitChange=function(){this.__hasChanged=!0},e.prototype.__invokeOnDispatch=function(e){if(this.__hasChanged=!1,this.__onDispatch(e),this.__hasChanged)return Array.from(this._listeners).map(function(e){return e()})},e})();t.FluxStore=n}),define("modules/clean/photos/thumb_loading/generic_thumb_store",["require","exports","modules/clean/photos/thumb_loading/http2_thumb_loader","modules/core/exception"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(){function e(e,t){this.loaderBatches=!1,this.thumbUrlToData={},this.callbackByRequestId={},this.loaderBatches=!!t,this.thumbLoader=e?e:new n.Http2ThumbLoader}return e.prototype.is_batching=function(){return this.loaderBatches},e.prototype.bind_url=function(e,t){var n=this;if(r.assert(!!t.onSuccess,"missing onSuccess handler"),this.thumbUrlToData[e])return t.onRequest&&t.onRequest(!0),t.onSuccess(!0),null;var o=this.thumbLoader.get_request_id();this.callbackByRequestId[o]=t;var a=function(){var e=n.callbackByRequestId[o];e&&e.onRequest&&e.onRequest(!1)},i=function(t){n.thumbUrlToData[e]=t;var r=n.callbackByRequestId[o];r&&r.onSuccess(!1)},s=function(){var e=n.callbackByRequestId[o];e&&e.onError&&e.onError()},l=function(){return n.callbackByRequestId.hasOwnProperty(o)};return this.thumbLoader.load_image(e,o,a,i,s,l),o},e.prototype.unbind_url=function(e){e&&(delete this.callbackByRequestId[e],this.thumbLoader.cancel_thumb(e))},e.prototype.get_thumb=function(e){return this.thumbUrlToData[e]?this.thumbUrlToData[e]:null},e})();t.GenericThumbStore=o}),define("modules/clean/photos/thumb_loading/http2_thumb_loader",["require","exports","modules/clean/photos/thumb_loading/utils"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(){this.http2RequestId=0}return e.prototype.get_request_id=function(){return this.http2RequestId+=1,this.http2RequestId.toString()},e.prototype.load_image=function(e,t,r,o,a,i){r(),n.load_individual_image(e,1,o,a,i)},e.prototype.cancel_thumb=function(e){},e})();t.Http2ThumbLoader=r}),define("modules/clean/photos/thumb_loading/utils",["require","exports"],function(e,t){"use strict";function n(e,t,n,r,o){var a=new Image;a.onload=function(){return n(e)},a.onerror=function(){t>0&&o()?(t-=1,a.src=e):r()},a.src=e}Object.defineProperty(t,"__esModule",{value:!0}),t.load_individual_image=n}),define("modules/clean/react/app_actions_view",["require","exports","tslib","external/classnames","spectrum/button","spectrum/icon_action","spectrum/popover","spectrum/overflow_button","spectrum/tertiary_link","react","modules/core/exception","modules/clean/react/css","modules/clean/user_education/react/user_education_effect","modules/clean/user_education/user_education_client","modules/clean/react/file_uploader/upload_button","modules/clean/react/badge"],function(e,t,n,r,o,a,i,s,l,u,d,c,p,m,f,h){"use strict";function _(e){return!("function"==typeof e)}Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importDefault(r),u=n.__importDefault(u);var y=function(e){e.handleClick&&e.handleClick()};t.AppActionsPopover=function(e){var t=e.primaryMenuItems,n=e.secondaryMenuItems,r=e.popoverTriggerLabel,o=[];if(t)for(var l=0,d=t;l<d.length;l++){var c=d[l];_(c)&&(o=c.subItems?o.concat(c.subItems):o.concat([c]))}return n&&(o=o.concat.apply(o,n.filter(function(e){return!("function"==typeof e)}))),o.length&&r?u.default.createElement(i.Popover,{onSelection:y},u.default.createElement(i.PopoverTrigger,null,u.default.createElement(p.UserEducationEffect,{containerName:"AppActionsPopover",name:"OverflowButton",useSpan:!0},u.default.createElement(s.OverflowButton,{tagName:"span","aria-label":r}))),u.default.createElement(i.PopoverContent,{attachment:"right"},o.map(function(e){return e=e,u.default.createElement(i.PopoverContentItem,{key:e.displayName,value:e,className:e.className,disabled:e.disabled},e.iconName&&u.default.createElement(a.IconAction,{name:e.iconName,className:"popover-item-icon"}),e.displayName)}))):u.default.createElement("noscript",null)};var v=function(e,t,n){m.UEClient.sendEvent(e,t),n&&n()},b=function(e){var t,n=e.primaryMenuItem,s=e.buttonVariant;if(_(n)){if(Object.keys(n).length>0){var l=r.default("primary-action-menu__button",n.className),d=l.indexOf("action-upload")>=0,c=!!n.subItems,m=u.default.createElement(p.UserEducationEffect,{containerName:"AppActionsView",name:"PrimaryButtonText",useSpan:!0},n.displayName),h=d?u.default.createElement(f.UploadButton,{className:l,disabled:n.disabled,handleClick:function(){v("AppActionsView","PrimaryButtonTextClicked",n.handleClick)},variant:s,tagName:c?"span":void 0},m):u.default.createElement(o.Button,{className:l,disabled:n.disabled,onClick:n.handleClick,variant:s,tagName:c?"span":void 0},m),b=c?u.default.createElement(i.Popover,{onSelection:y},u.default.createElement(i.PopoverTrigger,{disabled:n.disabled},h),u.default.createElement(i.PopoverContent,{className:"primary-action-menu__popover-menu"},n.subItems.map(function(e){return u.default.createElement(i.PopoverContentItem,{key:e.popoverMenuName,value:e,className:e.className,disabled:e.disabled},e.iconName&&u.default.createElement(a.IconAction,{name:e.iconName,className:"popover-item-icon"}),e.popoverMenuName)}))):h;t=b}}else t=n();return u.default.createElement("div",{className:"primary-action-menu__button-wrapper"},t)},g=function(e){var t=e.primaryMenuItems,n=e.headerText;return t&&t.length>0?u.default.createElement("div",{className:"primary-action-menu"},u.default.createElement("span",{className:"primary-action-menu__header-text"},n),t.map(function(e,t){var n=0===t?"primary":"secondary";return u.default.createElement(b,{primaryMenuItem:e,buttonVariant:n,key:t})})):u.default.createElement("noscript",null)},E=function(e){var t=e.menuItem,o=t.disabled,a=t.displayName,i=t.handleClick,s=t.iconName,d=t.badge,c=r.default("secondary-action-menu__button",e.menuItem.className),m=c.indexOf("action-upload")>=0,_=u.default.createElement(p.UserEducationEffect,{containerName:"AppActionsView",name:"SecondaryActionMenu-text-"+s},a,d&&u.default.createElement(h.Badge,n.__assign({},d)));return m?u.default.createElement(f.UploadButton,{key:a,iconName:s,handleClick:function(){v("AppActionsView","SecondaryActionMenu-text-"+s+"-Clicked",i)},disabled:o,className:c,variant:"secondary"},_):u.default.createElement(l.TertiaryLink,{key:a,icon:s,onClick:function(){v("AppActionsView","SecondaryActionMenu-text-"+s+"-Clicked",i)},disabled:o,className:c},_)},C=function(e){var t=e.secondaryMenuItems;return u.default.createElement(l.TertiaryList,{className:"secondary-action-menu"},t.map(function(e){return"function"==typeof e?e():u.default.createElement(E,{key:e.displayName,menuItem:e})}))},T=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.componentDidMount=function(){this.props.handleComponentTTI("AppActionsView")},r.prototype.render=function(){var e=this.props,n=e.responsive,r=e.primaryMenuItems,o=e.primarySubnode,a=e.secondaryMenuItems,i=e.headerText,s=e.popoverTriggerLabel,l=!(!n||!n.isResponsive||n.isMatchedLarge);return r&&r.forEach(function(e){_(e)&&e.subItems&&d.assert(e.subItems.length>0,"Primary menu item cannot have empty list of subItems")}),u.default.createElement("div",{className:"appactions-menu"},l&&u.default.createElement("div",{className:"appactions-menu--popover"},r&&s&&u.default.createElement(t.AppActionsPopover,{primaryMenuItems:r,secondaryMenuItems:a,popoverTriggerLabel:s})),!l&&u.default.createElement("div",{className:"appactions-menu--buttons"},r&&u.default.createElement(g,{primaryMenuItems:r,headerText:i}),o,a&&u.default.createElement(C,{secondaryMenuItems:a})))},r.defaultProps={headerText:"",secondaryMenuItems:[],handleComponentTTI:function(){}},r})(u.default.PureComponent),U=c.requireCssWithComponent(T,["/static/css/spectrum/index.web-vfliiTfMy.css","/static/css/dropbox/app_actions-vflvECjbj.css"]);t.AppActionsView=U}),define("modules/clean/react/file_uploader/file_uploader",["require","exports","tslib","react","modules/core/exception"],function(e,t,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importDefault(r);var a=null,i=(function(t){function i(e){var n=t.call(this,e)||this;return n.handleAllFileUploadsComplete=function(e){e.find(function(e){return!!n.state.uploadErrorTypes&&e.errorType===n.state.uploadErrorTypes.OVER_QUOTA_ERROR})&&!n.isPaidTeamViewer()&&i.showModal("out-of-quota"),n.props.onAllFileUploadsComplete&&n.props.onAllFileUploadsComplete(e)},n.path=n.props.initialPath?n.props.initialPath:"/",n.hasPermissionToUploadToFolder=!!n.props.initialPermission,n.state={fileUploader:void 0,uploaderStore:void 0,uploaderActions:void 0,viewer:void 0,uploadErrorTypes:void 0},n.props.loadOnRender&&i.requireFileUploader({}),a?o.reportStack("Only one FileUploader component may be rendered to the page at any time.You have tried to instantiate multiple uploaders.",{severity:o.SEVERITY.CRITICAL}):a=n,n}return n.__extends(i,t),i.requireFileUploader=function(t){var r=t.modalType,o=t.handleUploadButtonClick,s=t.folderUpload,l=function(e){var t=e[0].FileUploader,n=e[1].uploaderStore,l=e[2].UploaderActions,u=e[3].Viewer,d=e[4].UploadErrorType;a&&(a.setAsyncRequiredUploaderModules(t,l,n,u,d),r&&i.showModal(r),o&&i.handleUploadButtonClick(!!s))};l.perfName="file_uploader",Promise.all([new Promise(function(t,n){e(["modules/clean/react/file_uploader/uploader_new"],t,n)}).then(n.__importStar),new Promise(function(t,n){e(["modules/clean/react/file_uploader/store"],t,n)}).then(n.__importStar),new Promise(function(t,n){e(["modules/clean/react/file_uploader/actions"],t,n)}).then(n.__importStar),new Promise(function(t,n){e(["modules/clean/viewer"],t,n)}).then(n.__importStar),new Promise(function(t,n){e(["modules/clean/react/file_uploader/constants"],t,n)}).then(n.__importStar)]).then(l)},i.prototype.setAsyncRequiredUploaderModules=function(e,t,n,r,o){this.setState({fileUploader:e,uploaderStore:n,uploaderActions:t,viewer:r,uploadErrorTypes:o}),this.props.needToSetStoreValues&&(void 0!==this.user&&t.setUser({user:this.user}),t.setPath({path:this.path,hasPermissionToUploadToFolder:this.hasPermissionToUploadToFolder}))},i.prototype.componentWillUnmount=function(){a=null},i.loadCoreComponent=function(){a&&a.state.fileUploader||(e.defined("modules/clean/react/file_uploader/uploader"),i.requireFileUploader({}))},i.isCoreComponentDefined=function(){return!!a&&!!a.state.fileUploader},i.setPathAndPermissions=function(e){a&&a.state.uploaderActions&&a.state.uploaderActions.setPath(e)},i.setPath=function(e){a&&(a.state.uploaderActions?a.state.uploaderActions.setPath({path:e}):(e||(e="/"),a.path=e))},i.setUser=function(e){a&&(a.state.uploaderActions?a.state.uploaderActions.setUser({user:e}):a.user=e?e:void 0)},i.showModal=function(e){a&&(a.refs.fileUploader?e&&"regular"!==e?"out-of-quota"===e?a.refs.fileUploader.showOOQModal():"team-onboarding"===e&&a.refs.fileUploader.showModalWithTeamOnboarding():a.refs.fileUploader.showModal():(e=e||"regular",i.requireFileUploader({modalType:e})))},i.handleUploadButtonClick=function(e){a&&(a.refs.fileUploader?a.refs.fileUploader.handleUploadButtonClick(e):i.requireFileUploader({handleUploadButtonClick:!0,folderUpload:e}))},i.isDraggingFilesHelper=function(e){if(!a)return!1;if(!a.state.uploaderStore)return!1;var t=a.state.uploaderStore;return!!t.numDraggingFiles()&&(e?t.isInternalTransfer():!t.isInternalTransfer())},i.isDraggingInternalFiles=function(){return i.isDraggingFilesHelper(!0)},i.isDraggingExternalFiles=function(){return i.isDraggingFilesHelper(!1)},i.isUploadModalOpen=function(){return!!a&&(!!a.state.uploaderStore&&a.state.uploaderStore.isUploadModalOpen())},i.prototype.isPaidTeamViewer=function(){return!(!this.user||!this.state.viewer||!this.user.is_team||this.state.viewer.get_viewer().team_is_limited)},i.prototype.render=function(){if(!this.state.fileUploader)return r.default.createElement("div",null);var e=this.props,t=e.browseViewType,n=e.isContentManager,o=e.ajaxInterceptor,a=e.onFileUploadComplete,i=e.onModalDismissed,s=e.dragAndDropEnabled,l=e.shouldShowDestinationLink,u=e.uploaderExperiments,d=e.uploaderPostTTIExperiments,c=e.chooseDestination,p=e.rootNSIDForCM,m=this.state.fileUploader;return r.default.createElement(m,{ref:"fileUploader",key:1,browseViewType:t,isContentManager:n,ajaxInterceptor:o,onFileUploadComplete:a,onAllFileUploadsComplete:this.handleAllFileUploadsComplete,onModalDismissed:i,dragAndDropEnabled:s,shouldShowDestinationLink:l,uploaderExperiments:u,uploaderPostTTIExperiments:d,chooseDestination:c,rootNSIDForCM:p})},i})(r.default.Component);t.FileUploaderController=i}),define("modules/clean/react/file_uploader/upload_button",["require","exports","tslib","spectrum/button","spectrum/tertiary_link","react"],function(e,t,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a);var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.renderPrimaryButton=function(){return a.default.createElement(r.Button,{className:this.props.className,disabled:this.props.disabled,onClick:this.props.handleClick,variant:"primary",tagName:this.props.tagName},this.props.children)},t.prototype.renderTertiaryLink=function(){return a.default.createElement(o.TertiaryLink,{icon:this.props.iconName,onClick:this.props.handleClick,disabled:this.props.disabled,className:this.props.className},this.props.children)},t.prototype.renderCMButton=function(){return a.default.createElement("button",{className:this.props.className,disabled:this.props.disabled,onClick:this.props.handleClick},this.props.children)},t.prototype.render=function(){return"primary"===this.props.variant?this.renderPrimaryButton():"CM"===this.props.variant?this.renderCMButton():this.renderTertiaryLink()},t})(a.default.PureComponent);t.UploadButton=i});var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};define("modules/clean/sharing/wizard/async_wizard_modals",["require","exports"],function(e,t){"use strict";function n(t){new Promise(function(t,n){e(["modules/clean/sharing/wizard/wizard_modals"],t,n)}).then(__importStar).then(t)}function r(e,t,r,o){n(function(n){n.shareExistingFolder(e,t,r,o)})}function o(e,t){n(function(n){var r=n.showShareAFolderWizardModal(e);t&&t(r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShareExistingFolder=r,t.asyncShowShareAFolderWizardModal=o});
//# sourceMappingURL=pkg-browse-core.min.js-vflsNsigy.map