define("modules/clean/react/browse/util",["require","exports","modules/clean/react/browse/models","modules/clean/react/browse/sort_helpers","modules/clean/react/files_view/types","modules/core/exception","modules/core/i18n"],function(e,t,o,r,i,n,l){"use strict";function a(e,t){var r=e.count(),i=l._("You only have partial access");return r>0?1!==r||o.File.canViewFileMembers(e.first(),t)?l.ungettext("%(count)d item selected","%(count)d items selected",r).format({count:r}):o.File.isNoAccessSharedFolder(e.first())?l._("You don’t have access to this folder"):i:t&&!t.canViewContainingNSMembers?i:""}function s(e,t,o,r){var i=t.sortField,l=t.sortDirection,a=d(i,o),s=c(i,l,r);return a&&s?e.sortBy(a,s):(n.reportException({err:new Error("sortFiles was called with an unsupported sort field"),tags:["browse_sort_invalid_field"],severity:n.SEVERITY.CRITICAL,exc_extra:{sort_field:i}}),e)}function d(e,t){switch(e){case i.SortField.FILENAME:case i.SortField.SHARED_WITH:return function(e){return u(e,o.File.getFilename(e))};case i.SortField.MODIFIED:return function(e){return u(e,e.ts)};case i.SortField.CATEGORY:return function(e){return u(e,o.File.getCategoryDescription(e))};case i.SortField.EXTENSION:return function(e){return u(e,o.File.getExtension(e))};case i.SortField.SIZE:return function(e){return u(e,e.is_dir&&t.has(e.fq_path)?t.get(e.fq_path).size:e.bytes)};default:return}}function c(e,t,o){var r=l.case_insensitive_comparator(!0),n=t===i.SortDirection.ASCENDING?1:-1,a=o?p(n,r):f(n,r);switch(e){case i.SortField.FILENAME:case i.SortField.SHARED_WITH:case i.SortField.SIZE:return a;case i.SortField.MODIFIED:case i.SortField.CATEGORY:case i.SortField.EXTENSION:return m(n,r);default:return}}function u(e,t){return{isFolder:e.is_dir,value:t,isTMF:o.File.isTeamMemberFolder(e)}}function p(e,t){return function(o,i){var n=o.value,l=o.isTMF,a=i.value;return h(l,i.isTMF)||r.compare(n,a,e,t)}}function f(e,t){return function(o,i){var n=o.isFolder,l=o.value,a=o.isTMF,s=i.isFolder,d=i.value,c=i.isTMF,u=h(a,c);return u?u:(l||(l=1/0*e),d||(d=1/0*e),n&&s?r.compare(l,d,e,t):n?-e:s?e:r.compare(l,d,e,t))}}function m(e,t){return function(o,i){var n=o.isFolder,l=o.value,a=o.isTMF,s=i.isFolder,d=i.value,c=i.isTMF,u=h(a,c);return u?u:n&&s?r.compare(l,d,e,t):n?1:s?-1:""===l?1:""===d?-1:r.compare(l,d,e,t)}}function h(e,t){return e?-1:t?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedFilesText=a,t.sortFiles=s});var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};define("modules/clean/react/file_viewer/async_controller",["require","exports"],function(e,t){"use strict";function o(){Array.from(document.querySelectorAll(n)).forEach(function(e){e.style.display&&e.setAttribute("data-preview-old-display",e.style.display),e.style.display="none"})}function r(){Array.from(document.querySelectorAll(n)).forEach(function(e){e.style.display=e.hasAttribute("data-preview-old-display")?e.getAttribute("data-preview-old-display"):""})}function i(t){var o=t.containerId,r=t.files,i=t.fileViewAction,n=t.fileViewOrigin,l=t.fileViewTarget,a=t.indexOfPreviewFile,s=t.onFileViewerDidMount,d=t.onFileViewerUnmount,c=t.shouldFocusComment,u=void 0!==c&&c,p=t.shouldPrepareForSignature,f=void 0!==p&&p,m=t.updateBrowserLocation,h=void 0===m||m,_=t.user,g=t.filePreviewDataFetcher;new Promise(function(t,o){e(["modules/clean/react/file_viewer/controller"],t,o)}).then(__importStar).then(function(e){e.open(r,a,_,o,{fileViewTarget:l,fileViewOrigin:n,fileViewAction:i,shouldFocusCommentInput:u,disableRouting:!h,onComponentDidMount:s,onComponentWillUnmount:d,filePreviewDataFetcher:g,shouldPrepareForSignature:!!f})})}Object.defineProperty(t,"__esModule",{value:!0});var n=[".maestro-chrome","#maestro-nav","#page-footer","#page-content","#page-header","#page-sidebar","#browse-box",".growth-onboarding-progress-bar__container",".team-progress-bar-experience","#flash-upload-container","#maestro-header"].join();t.hideElementsBehindFileViewer=o,t.showElementsBehindFileViewer=r,t.asyncOpenPreview=i}),define("modules/clean/react/files_view/constants",["require","exports","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP=12,t.CHECKBOX_CELL_FLEX="0 0 36px",t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=65,t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:r._("Name"),popoverTriggerLabel:r._("Name"),isLocked:!0},{sortField:o.SortField.MODIFIED,label:r._("Modified"),popoverTriggerLabel:r._("Modified")},{sortField:o.SortField.SHARED_WITH,label:r._("Members"),popoverTriggerLabel:r._("Members")},{sortField:o.SortField.CATEGORY,label:r._("Type"),popoverTriggerLabel:r._("Type")},{sortField:o.SortField.EXTENSION,label:r._("Extension"),popoverTriggerLabel:r._("Extension")},{sortField:o.SortField.SIZE,label:r._("Size"),popoverTriggerLabel:r._("Size")}],t.GRID_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:r._("Name"),popoverTriggerLabel:r._("Name")},{sortField:o.SortField.MODIFIED,label:r._("Modified"),popoverTriggerLabel:r._("Modified")},{sortField:o.SortField.CATEGORY,label:r._("Type"),popoverTriggerLabel:r._("Type")},{sortField:o.SortField.EXTENSION,label:r._("Extension"),popoverTriggerLabel:r._("Extension")},{sortField:o.SortField.SIZE,label:r._("Size"),popoverTriggerLabel:r._("Size")}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:"",popoverTriggerLabel:"",isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:r._("Modified"),popoverTriggerLabel:r._("Modified"),isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.SIZE,label:r._("Size"),popoverTriggerLabel:r._("Size"),isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:o.SortField.FILENAME,label:"",popoverTriggerLabel:"",isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:r._("Deleted"),popoverTriggerLabel:r._("Deleted"),isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[o.NewFolderCreationState.CREATE_FOLDER_INACTIVE,o.NewFolderCreationState.PENDING_INPUT,o.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[o.RenameState.PENDING_INPUT,o.RenameState.SAVING_INPUT],t.AllViewTypes=[o.ViewType.Grid,o.ViewType.LargeGrid,o.ViewType.List],t.ViewTypeLabels=(i={},i[o.ViewType.Grid]=r._("Small"),i[o.ViewType.List]=r._("List"),i[o.ViewType.LargeGrid]=r._("Large"),i),t.AllDropTargetHighlightModes=[o.DropTargetHighlightMode.NONE,o.DropTargetHighlightMode.ALL_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[o.SortField.FILENAME,o.SortField.MODIFIED,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SIZE,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING,o.SortField.FILE_COUNTS],t.SortIsFilename=[o.SortField.FILENAME,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING],t.AllLoadingStates=[o.LoadingState.LOADED,o.LoadingState.LOADING_FIRST_PAGE,o.LoadingState.LOADING_REMAINING_PAGES],t.AllSortDirections=[o.SortDirection.ASCENDING,o.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=(n={},n[o.ViewType.Grid]=256,n[o.ViewType.LargeGrid]=512,n[o.ViewType.List]=32,n),t.ViewTypeGridSizes=(l={},l[o.ViewType.Grid]=160,l[o.ViewType.LargeGrid]=480,l[o.ViewType.List]=0,l),t.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5},t.OverflowMenuConstants={MENU_ITEM_HEIGHT_PX:32,MENU_MARGIN_PX:8,MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX:17},t.VIEW_TYPE_COOKIE_NAME="browse_view_type",t.COLUMNS_STORAGE_KEY="browse_columns";var i,n,l}),define("modules/clean/react/files_view/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/no-jquery"],function(e,t,o,r){"use strict";function i(e,t,o,i,n,l,s){a.add(e,"dragenter",function(e){(t()||o())&&!r.closestElement(e.target,n)&&l()&&(s(null),i())})}function n(e){a.remove(e,"dragenter")}function l(e,t,r,i,n,l,a,s){if(t||r){if(e.is_dir&&!(i&&r)){if(n)return;var d=l.isCurrentPathWriteable()&&!o.File.isReadOnlySharedFolder(e);a(e),s({path:e.fq_path,hasPermissionToUploadToFolder:d})}else a(null),s()}}Object.defineProperty(t,"__esModule",{value:!0});var a=new r.ScopedEventHandlers(document);t.setupExternalDragHandler=i,t.cleanupExternalDragHandler=n,t.onFileDragEnterItem=l}),define("modules/clean/react/files_view/file_jump",["require","exports","tslib","modules/clean/keycode","modules/clean/react/no-jquery","modules/core/dom"],function(e,t,o,r,i,n){"use strict";function l(e,t,o,l){var d=null!=e.which?e.which:e.keyCode,c=String.fromCharCode(d);d<r.KeyCode.SPACE||a.includes(c)||!i.closestElement(document.activeElement,".brws-checkbox-cell")&&n.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||d===r.KeyCode.SPACE&&!t()||(d===r.KeyCode.SPACE&&t()&&e.preventDefault(),o(c),null!=s&&clearTimeout(s),s=setTimeout(function(){l()},1e3))}Object.defineProperty(t,"__esModule",{value:!0}),n=o.__importStar(n);var a=["/","\\",":","?","*","<",">","|"],s=null;t.handleKeyPress=l}),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","external/immutable","external/lodash","react","modules/clean/react/files_view/keyboard_shortcuts","spectrum/media_table","spectrum/table"],function(e,t,o,r,i,n,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importStar(r),i=o.__importStar(i),n=o.__importDefault(n);var d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI&&this.props.onTTI(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts()},t.prototype.setupKeyboardShortcuts=function(){var e=this;l.setupFilesViewListKeyboardShortcuts({getIsGlobalEvent:l.generateGetIsGlobalEvent(this),getIsItemEvent:function(){return!1},getSelectedFiles:function(){return r.OrderedMap()},isCurrentPathWriteable:function(){return!1},enableContextMenu:function(){return!1},selectAllAction:i.noop,deselectAllAction:i.noop,onCopyToClipboard:i.noop,onDelete:i.noop,onFocusSearchBar:this.props.onFocusSearchBar,onNavigateToFileOrFolder:i.noop,onNavigateToParentFolder:this.props.onNavigateToParentFolder,onPasteFromClipboard:this.props.onPasteFromClipboard,onShowRename:i.noop,openContextMenuAtPosition:i.noop,scope:"EmptyFolderTable",onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},t.prototype.cleanupKeyboardShortcuts=function(){l.resetFilesViewKeyboardShortcuts("EmptyFolderTable")},t.prototype._renderTitle=function(){return n.default.createElement("h3",{className:"u-font-strong empty-folder-table-title"},this.props.title)},t.prototype._renderSubtitle=function(){var e=this.props,t=e.subtitle,o=e.subtitleLink,r=e.subtitleOnClick;return t&&o?n.default.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:o,onClick:r},t):t?n.default.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0},t.prototype.render=function(){for(var e=[],t=0;t<this.props.numRowsAbove;t++)e.push(n.default.createElement(a.MediaRow,{key:-t-1}));for(var o=[],r=Math.max(this.props.totalRows-this.props.numRowsAbove-1,0),t=0;t<r;t++)o.push(n.default.createElement(a.MediaRow,{key:t+1}));return n.default.createElement(s.Table,{className:"empty-folder-table"},n.default.createElement(s.TableHead,null),n.default.createElement(s.TableBody,null,e,n.default.createElement(a.MediaRow,{key:0},n.default.createElement(a.MediaCell,{className:"empty-folder-table-cell",title:this._renderTitle(),subtitle:this._renderSubtitle()})),o))},t.defaultProps={numRowsAbove:2,totalRows:14,onFocusSearchBar:i.noop,onPasteFromClipboard:i.noop,onNavigateToParentFolder:i.noop,onOpenKeyboardShortcutModal:i.noop},t})(n.default.PureComponent);t.EmptyFolderTable=d}),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],function(e,t,o,r,i,n){"use strict";function l(e){var t=e.file,n=e.isSelected,l=e.dropTargetHighlightMode;if(l===r.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(i.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(l){case r.DropTargetHighlightMode.ALL_FOLDERS:return!0;case r.DropTargetHighlightMode.NONSELECTED_FOLDERS:return!n;case r.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS:return!n&&t.type!==o.FileTypes.SHARED_FOLDER;case r.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS:return!n&&![o.FileTypes.SHARED_FOLDER,o.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1}function a(e){var t=e.context,r=e.file;e.user;return r.isDeleted||r.is_dir&&n.shouldUsePublicFolderSharing(t.config,r.fq_path)||i.File.isTeamMemberFolder(r)||!i.File.canViewFileMembers(r,t)||r.type===o.FileTypes.SANDBOX}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldFileBeHighlightedDropTarget=l,t.isSharingDisabledForFile=a}),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","tslib","external/keymaster","external/react-dom","modules/clean/undo","modules/core/browser_detection","modules/core/i18n","modules/core/notify","modules/clean/react/files_view/file_jump","modules/clean/react/no-jquery"],function(e,t,o,r,i,n,l,a,s,d,c){"use strict";function u(e){r.default.clearScope(e),r.default.setScope(E)}function p(e,t){return function(o){e(o)&&(o.preventDefault(),"function"==typeof t&&t(o))}}function f(e){return function(t){return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&i.findDOMNode(e).contains(t.target)}}function m(e){u(e),T.remove(e,"keydown"),T.remove(e,"keyup")}function h(e){var t=e.getIsGlobalEvent,o=e.getIsItemEvent,i=e.getSelectedFiles,d=e.isFilesViewList,c=e.isCurrentPathWriteable,u=e.selectAllAction,f=e.deselectAllAction,m=e.onCopyToClipboard,h=e.onFocusSearchBar,_=e.onDelete,g=e.onPasteFromClipboard,S=e.onShowRename,T=e.onShowHelpMenu,w=e.scope;E=r.default.getScope(),E!==w&&r.default.setScope(w);var b=function(){var e=i(),t=e.some(function(e){return e.read_only});if(1===e.size)if(c()&&!t){var o=e.first();o.isDeleted?s.Notify.error(a._("Deleted files can’t be renamed.")):S(o)}else s.Notify.warning(a._("You don’t have permission to rename files in this folder."))},y=function(){var e=i();e.size&&_(e.toArray())},v=function(){n.performUndo()};r.default("f2",w,p(o,b)),r.default("/",w,p(t,h)),r.default("shift+/",w,p(t,function(){return T(!!d)})),r.default("escape",w,p(t,f)),l.mac?(r.default("command+a",w,p(t,u)),r.default("command+c",w,p(o,m)),r.default("backspace",w,p(o,y)),r.default("command+v",w,p(t,g)),r.default("command+z",w,p(t,v))):(r.default("ctrl+a",w,p(t,u)),r.default("ctrl+c",w,p(o,m)),r.default("delete",w,p(o,y)),r.default("ctrl+v",w,p(t,g)),r.default("ctrl+z",w,p(t,v)))}function _(e){var t=e.getIsGlobalEvent,o=e.getIsItemEvent,i=e.getSelectedFiles,n=e.isCurrentPathWriteable,l=e.enableContextMenu,a=e.selectAllAction,s=e.deselectAllAction,d=e.onCopyToClipboard,u=e.onDelete,f=e.onFocusSearchBar,m=e.onNavigateToFileOrFolder,_=e.onNavigateToParentFolder,g=e.onPasteFromClipboard,S=e.onShowRename,E=e.onShowHelpMenu,T=e.openContextMenuAtPosition,w=e.scope;h({getIsGlobalEvent:t,getIsItemEvent:o,getSelectedFiles:i,isFilesViewList:!0,isCurrentPathWriteable:n,selectAllAction:a,deselectAllAction:s,onCopyToClipboard:d,onFocusSearchBar:f,onDelete:u,onPasteFromClipboard:g,onShowRename:S,onShowHelpMenu:E,scope:w});var b=function(){var e=i();1===e.size&&m(e.first())},y=function(){var e=i(),t=e.first();1===e.size&&t.is_dir&&m(t)},v=function(e){if("function"==typeof T&&i().size){if(e.target instanceof Element){var t=c.closestElement(e.target,".browse-file-row--is-selected");if(t){var o=t.offsetLeft+200,r=t.offsetTop+5;T(o,r,t)}}}else T(10,10)};r.default("enter",w,p(o,b)),r.default("right",w,p(o,y)),r.default("left",w,p(t,_)),l()&&r.default("alt+a",w,p(t,v))}function g(e){var t=e.scope,o=e.getIsFileJumping,i=e.onAddFileJumpKeyCode,n=e.onResetFileJump,l=function(e){r.default.getScope()===t&&d.handleKeyPress(e,o,i,n)};T.add(t,"keypress",l)}function S(e){T.remove(e,"keypress")}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importStar(i),n=o.__importStar(n),l=o.__importStar(l),d=o.__importStar(d),t.FILES_VIEW_SHORTCUTS=[{windowsKey:a._("Enter",{comment:"Windows keyboard name for the enter/return key (capitalized Enter)"}),macKey:a._("return",{comment:"Mac keyboard name for the enter/return key (all lowercase return)"}),desc:a._("Open file or folder")},{key:a._("/",{comment:"Keyboard symbol for the forward slash"}),desc:a._("Search")},{windowsKey:a._("Ctrl + a",{comment:"Windows keyboard name for the control key plus a key (capitalized Ctrl)"}),macKey:a._("⌘ + a",{comment:"Mac keyboard name for the command key plus a key (⌘ symbol)"}),desc:a._("Select all files")},{windowsKey:a._("Esc",{comment:"Windows keyboard name for the esc key (capitalized)"}),macKey:a._("esc",{comment:"Mac keyboard name for the esc key (all lowercase)"}),desc:a._("Deselect all files")},{windowsKey:a._("Ctrl + c",{comment:"Windows keyboard name for the control key plus c key (capitalized Ctrl)"}),macKey:a._("⌘ + c",{comment:"Mac keyboard name for the command key plus c key (⌘ symbol)"}),desc:a._("Copy selected file(s)")},{windowsKey:a._("Ctrl + v",{comment:"Windows keyboard name for the control key plus v key (capitalized Ctrl)"}),macKey:a._("⌘ + v",{comment:"Mac keyboard name for the command key plus v key (⌘ symbol)"}),desc:a._("Paste selected file(s) into the current folder")},{key:a._("F2",{comment:"Keyboard name for the F2 key"}),desc:a._("Rename selected file")},{windowsKey:a._("Delete",{comment:"Windows keyboard name for the delete key (capitalized)"}),macKey:a._("delete",{comment:"Mac keyboard name for the delete key (all lowercase)"}),desc:a._("Delete selected file(s)")},{windowsKey:a._("Ctrl + z",{comment:"Windows keyboard name for the control key plus z key (capitalized Ctrl)"}),macKey:a._("⌘ + z",{comment:"Mac keyboard name for the command key plus z key (⌘ symbol)"}),desc:a._("Undo recent move/copy/rename/delete")},{key:a._("?",{comment:"Keyboard symbol for the question mark"}),desc:a._("Show keyboard shortcuts")}],t.FILES_VIEW_LIST_SHORTCUTS=[{key:a._("↑",{comment:"Keyboard symbol for the up arrow key"}),desc:a._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:a._("↓",{comment:"Keyboard symbol for the down arrow key"}),desc:a._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:a._("←",{comment:"Keyboard symbol for the left arrow key"}),desc:a._("Go up a folder")},{key:a._("→",{comment:"Keyboard symbol for the right arrow key"}),desc:a._("Open folder")}].concat(t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=[{key:a._("↑",{comment:"Keyboard symbol for the up arrow key"}),desc:a._("Select file in previous row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:a._("↓",{comment:"Keyboard symbol for the down arrow key"}),desc:a._("Select file in next row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:a._("←",{comment:"Keyboard symbol for the left arrow key"}),desc:a._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:a._("→",{comment:"Keyboard symbol for the right arrow key"}),desc:a._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})}].concat(t.FILES_VIEW_SHORTCUTS);var E="",T=new c.ScopedEventHandlers(document);t.generateGetIsGlobalEvent=f,t.resetFilesViewKeyboardShortcuts=m,t.setupFilesViewKeyboardShortcuts=h,t.setupFilesViewListKeyboardShortcuts=_,t.setupFileJumpKeyboardShortcuts=g,t.resetFileJumpKeyboardShortcuts=S}),define("modules/clean/react/files_view/name_input",["require","exports","tslib","external/classnames","react","modules/clean/keycode","modules/clean/react/files_view/types"],function(e,t,o,r,i,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importDefault(i);var a=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setInputRef=function(e){t.inputRef=e},t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(l.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===n.KeyCode.ESC?(e.preventDefault(),t.props.onCancel({source:l.NameInputActionSource.ESC})):e.keyCode===n.KeyCode.ENTER&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(l.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.focus(),window.requestAnimationFrame(function(){var t=e.inputRef.value,o=e.props.isDir?t.length:t.lastIndexOf(".");o<0&&(o=t.length),e.inputRef.setSelectionRange(0,o)})},t.prototype.submitIfChanged=function(e){var t=this.inputRef.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)},t.prototype.render=function(){return i.default.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},i.default.createElement("input",{ref:this.setInputRef,defaultValue:this.props.defaultValue,className:r.default("c-input",this.props.className),onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:a,onClick:a,onSubmit:a,idDir:null},t})(i.default.PureComponent);t.NameInput=s}),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","react","spectrum/overflow_button","spectrum/popover","modules/core/i18n","external/lodash","modules/clean/react/files_view/constants"],function(e,t,o,r,i,n,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),a=o.__importStar(a);var d;(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(d=t.OverflowMenuSize||(t.OverflowMenuSize={}));var c=(function(e){function t(o){var r=e.call(this,o)||this;return r.onClick=function(e){e.preventDefault(),e.stopPropagation()},r.handleSelection=function(e){e.performAction()},r.setOverflowMenuRef=function(e){r.overflowMenuContent=e},r.handleMenuToggle=function(e){var o=e.isOpen;if(t.isDynamicProps(r.props)&&o){var i=r.props.getOverflowMenuActions(r.props.file,!!r.props.canDisplayFolderSizes);r.setState({actionItemsGroups:i,popoverContentPosition:r.calculatePopoverContentPosition(i)})}},r.state={popoverContentPosition:"below",actionItemsGroups:t.isDynamicProps(o)?[]:o.actionItemsGroups},r}return o.__extends(t,e),t.prototype.renderOverflowButton=function(){return r.default.createElement(i.OverflowButton,{"aria-label":l._("More actions"),className:"browse-overflow-menu-trigger-button",tagName:"span",size:this.props.size===d.Small?"small":"default",variant:this.props.showBorders?"secondary":"borderless"})},t.prototype.componentDidMount=function(){t.isDynamicProps(this.props)||this.setState({popoverContentPosition:this.calculatePopoverContentPosition(this.props.actionItemsGroups)})},t.prototype.calculatePopoverContentPosition=function(e){if(e.length<=0||!this.overflowMenuContent)return this.state.popoverContentPosition;var t=this.overflowMenuContent.getElementsByClassName("browse-overflow-menu-trigger-button")[0],o=s.OverflowMenuConstants.MENU_ITEM_HEIGHT_PX*e[0].length+2*s.OverflowMenuConstants.MENU_MARGIN_PX;e.length>1&&(o+=s.OverflowMenuConstants.MENU_ITEM_HEIGHT_PX*e[1].length+s.OverflowMenuConstants.MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX);var r=t.getBoundingClientRect(),i=this.props.viewportTopOffset||s.CulledListConstants.DEFAULT_HEADER_HEIGHT_PX;return r.top>o+i&&r.bottom+o>window.innerHeight?"above":"below"},t.prototype._getMenuItems=function(){var e=this.state.actionItemsGroups;return a.reduce(e,function(e,t,o){var i=t.map(function(e){return r.default.createElement(n.PopoverContentItem,{className:e.className,key:e.label,value:e,disabled:e.disabled},e.label)});return o?e.concat([r.default.createElement(n.PopoverItemGroupSeparator,{key:o})],i):i.slice()},[])},t.prototype.render=function(){var e=this.props.attachment,t=this._getMenuItems();return r.default.createElement("div",{className:"browse-overflow-menu",onClick:this.onClick,onDoubleClick:this.onClick,ref:this.setOverflowMenuRef},r.default.createElement(n.Popover,{onSelection:this.handleSelection,closeOnSelection:!0,onMenuToggle:this.handleMenuToggle},r.default.createElement(n.PopoverTrigger,{className:"browse-overflow-menu-trigger"},this.renderOverflowButton()),r.default.createElement(n.PopoverContent,{attachment:e,position:this.state.popoverContentPosition,className:"browse-overflow-menu-content"},t)))},t.isDynamicProps=function(e){return"file"in e},t.defaultProps={attachment:"right",onMenuToggle:function(){}},t})(r.default.PureComponent);t.FilesViewOverflowMenu=c}),define("modules/clean/react/files_view/star",["require","exports","tslib","react","modules/clean/react/async/loadable"],function(e,t,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),t.StarContainer=i.Loadable({loader:function(){return o.__awaiter(this,void 0,void 0,function(){var t,i,n,l;return o.__generator(this,function(a){switch(a.label){case 0:return[4,new Promise(function(t,o){e(["modules/clean/react/starred/browse_exports"],t,o)}).then(o.__importStar)];case 1:return t=a.sent(),i=t.idTypePairFromStarrableItem,n=t.Star,l=t.StarredSource,[2,function(e){var t=e.item,o=e.user,a=e.className,s=e.onStarClick,d=e.isReadOnly,c=e.isTabbing,u=i(t),p=u.id,f=u.type;return r.default.createElement("div",{className:a},r.default.createElement(n,{id:p,key:"star",idType:f,user:o,onStarClick:s,source:l.BROWSE,isReadOnly:d,isTabbing:c}))}]}})})}})}),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","external/classnames","external/immutable","react","spectrum/button","modules/clean/em_string","modules/clean/filepath","modules/core/browser","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/browse/models","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/util","modules/clean/react/selectable_list","modules/clean/react/files_view/star","modules/clean/react/maestro/tile_grid","modules/clean/react/title_bubble","modules/core/i18n","modules/core/uri"],function(e,t,o,r,i,n,l,a,s,d,c,u,p,f,m,h,_,g,S,E,T,w,b,y,v){"use strict";function I(e,t){var o;return e.thumbnail_url_tmpl&&(o=v.URI.parse(e.thumbnail_url_tmpl),o=o.removeQuery("size").removeQuery("size_mode"),o=o.updateQuery({size:t+"x"+t,size_mode:"2"}).toString()),o}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importStar(i),n=o.__importDefault(n),s=o.__importStar(s),d=o.__importStar(d),t.getThumbnailUrlForItem=I;var F=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onStarClickCallback=function(e){var o=t.props,r=o.onStarClick,i=o.item,n=i;r&&r(n,e)},t}return o.__extends(t,e),t.prototype.render=function(){var e,t=this.props,o=t.fileRename,r=t.arePostTTIModulesLoaded,i=t.user,l=t.item,d=t.inSelectMode,c=t.createRenameCancelHandler,u=t.createRenameSubmitHandler,f=l instanceof p.File,g=l,S=l;if(e=f?s.filename(g.fq_path):S.title,f&&o&&s.paths_are_equal(o.file.fq_path,g.fq_path)){if(o.state===h.RenameState.PENDING_INPUT)return n.default.createElement(m.TileLabelInput,{defaultValue:e,label:e,onCancel:c(g),onSubmit:u(g)});if(o.state===h.RenameState.SAVING_INPUT)return n.default.createElement(w.TileItemLabelText,{className:"tile-label__text--saving",label:y._("Renaming…")})}var E=a.Emstring.em_snippet(e,14,.5),v=r&&!d&&!p.File.isNoAccessSharedFolder(g),I=n.default.createElement(w.TileItemLabelText,{key:"label",label:E});if(e!==E){var F=e.length<=_.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH?e:n.default.createElement("div",{className:"tile-label-tooltip"},e);I=n.default.createElement(b.TitleBubble,{content:F,position:b.TitleBubble.POSITIONS.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},I)}var L=f?this.onStarClickCallback:void 0,N=n.default.createElement(T.StarContainer,{item:l,user:i,className:"tile-star",key:"tileStar",onStarClick:L});return n.default.createElement("span",null,[I,v&&!o&&N])},t})(n.default.PureComponent);t.TileLabel=F;var L=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={inSelectMode:!1,selectedIds:i.Set(),totalNumItems:0},t.handleFileViewerUnmount=function(){t.tileGrid&&t.tileGrid.getAndUpdateTileLayout();var e=t.props.selectedFiles.first();e&&t.props.onFocusFile(e.fq_path)},t.createRenameCancelHandler=function(e){return function(){t.props.onRenameCancel(e)}},t.createRenameSubmitHandler=function(e){return function(o){t.props.onRenameSubmit(e,o)}},t.setTileGridRef=function(e){t.tileGrid=e},t.hrefForItem=function(e,o){return o instanceof p.File?t.props.hrefForFile(e,o):o.url},t.getTileItem=function(e,o){var r=t.props,i=r.activeDropTarget,a=r.isCreateFolderUIActive,d=r.isPhotosPage,c=r.items,u=r.selection,f=r.user,m=r.viewType,h=r.disabledMultiselect,g=t.state.inSelectMode;if(a){if(0===e)return t.getCreateFolderTile();e-=1}var S=c.get(e);if(!S){var E="Placeholder "+e;return{altText:E,id:E,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var T=S instanceof p.File,w=S,b=S,v=g&&T,F=v&&u.selected.last()===w.fq_path,L=v&&u.selected.has(w.fq_path),N=t.createViewFileHandler(w),C=t.createToggleSelectHandler(w,L),D=v?n.default.createElement(l.Button,{className:"tile__action-button--view-file",variant:"secondary",size:"small","aria-label":y._("View File"),onClick:N}):T?t.renderTileOverflowMenu(w,o):void 0,R=v?C:N,O=d?void 0:t.renderLabelElement(S),M=T?s.filename(w.fq_path):b.title,A=T?I(w,_.ViewTypeThumbnailSizes[m]):void 0,P=S===i,H=t.hrefForItem(f,S);return{file:w,paper:S instanceof p.Paper?b:void 0,id:T?w.fq_path:b.pad_id,labelNode:O,altText:M,thumbnailUrl:A,actionNode:D,onTileAction:R,isDraggable:!d,isViewOnly:h,isFocused:F,isSelectable:T,handleToggleSelect:C,checkboxAriaText:y._("Select tile"),href:H,onDragEnter:d?void 0:t.createDragEnterHandler(w,L,P),onDragStart:d?void 0:t.createDragStartHandler(w,L,C)}},t.shouldFileBeHighlightedDropTarget=function(e,o){var r=t.props.dropTargetHighlightMode;return c.shouldFileBeHighlightedDropTarget({file:e,isSelected:o,dropTargetHighlightMode:r})},t}return o.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setTotalNumItems(this.props),this.setSelectedTiles(this.props)},t.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){
this.props.isPhotosPage||u.resetFileJumpKeyboardShortcuts(E.SELECTABLE_TILE_GRID_KEY_SCOPE),u.resetFilesViewKeyboardShortcuts(E.SELECTABLE_TILE_GRID_KEY_SCOPE),g.cleanupExternalDragHandler(E.SELECTABLE_TILE_GRID_KEY_SCOPE)},t.prototype.componentWillReceiveProps=function(e){e.items===this.props.items&&e.createNewFolderState===this.props.createNewFolderState||this.setTotalNumItems(e),e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0}))},t.prototype.componentDidUpdate=function(e){(e.createNewFolderState===h.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===h.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGrid.forceUpdate()},t.prototype.setTotalNumItems=function(e){var t=Math.max(e.items.size,e.totalNumItems);e.isCreateFolderUIActive&&(t+=1),this.setState({totalNumItems:t})},t.prototype.createToggleSelectHandler=function(e,t){var o=this,r=e.fq_path;return function(e){e.preventDefault(),e.stopPropagation();var i=o.props,n=i.onDeselectFile,l=i.onSelectFile,a="keyCode"in e,s=!a&&e.shiftKey;t?n(r,s):l(r,s)}},t.prototype.renderTileOverflowMenu=function(e,t){var o=this.props.getOverflowMenuActions,r=0===t?"left":"right";return n.default.createElement(f.FilesViewOverflowMenu,{file:e,getOverflowMenuActions:o,attachment:r,size:f.OverflowMenuSize.Small,showBorders:!0})},t.prototype.renderLabelElement=function(e){var t=this.state.inSelectMode,r=this.props,i=r.user,l=r.fileRename,a=r.arePostTTIModulesLoaded,s=r.onStarClick,d={user:i,fileRename:l,arePostTTIModulesLoaded:a,onStarClick:s};return n.default.createElement(F,o.__assign({},d,{item:e,inSelectMode:t,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler}))},t.prototype.createViewFileHandler=function(e){var t=this;return function(o){if(o.preventDefault(),o.stopPropagation(),"click"===o.type){var r=o;if(0===r.button){var i=t.hrefForItem(t.props.user,e);if(S.hasModifierKey(r))return void d.open_tab(i)}}e instanceof p.File?t.props.onNavigateToFileOrFolder(e,t.handleFileViewerUnmount):e instanceof p.Paper&&t.props.onOpenPaper(e)}},t.prototype.setSelectedTiles=function(e){var t=i.Set().withMutations(function(t){e.selectedFiles.forEach(function(e){t.add(e.fq_path)})});this.setState({selectedIds:t})},t.prototype.setupExternalDragHandler=function(){var e=this,t=function(){return!!e.props.isDraggingInternalFiles},o=function(){return!!e.props.isDraggingExternalFiles},r=function(){return e.props.activeDropTarget};g.setupExternalDragHandler(E.SELECTABLE_TILE_GRID_KEY_SCOPE,t,o,this.props.onSetFileUploaderPath,".tile",r,this.props.onSetDropTarget)},t.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,o=t.onDelete,r=t.onShowRename,i=t.deselectAll,n=t.getIsCurrentPathWriteable,l=t.getIsFileJumping,a=t.onAddFileJumpKeyCode,s=t.onResetFileJump,d=t.onCopyToClipboard,c=t.onFocusSearchBar,p=t.onPasteFromClipboard,f=t.selectAll,m=u.generateGetIsGlobalEvent(this),h=m,_=function(){return e.props.selectedFiles};this.props.isPhotosPage||u.setupFileJumpKeyboardShortcuts({scope:E.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:l,onAddFileJumpKeyCode:a,onResetFileJump:s}),u.setupFilesViewKeyboardShortcuts({getIsGlobalEvent:m,getIsItemEvent:h,getSelectedFiles:_,isFilesViewList:!1,isCurrentPathWriteable:n,selectAllAction:f,deselectAllAction:i,onCopyToClipboard:d,onDelete:o,onFocusSearchBar:c,onPasteFromClipboard:p,onShowRename:r,scope:E.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},t.prototype.createDragEnterHandler=function(e,t,o){var r=this;return function(i){r.props.onDragEnter(i,e,t,o)}},t.prototype.createDragStartHandler=function(e,t,o){var r=this;return function(i){t?r.props.onDragStart(i):(o(i),r.props.onDragStart(i,[e]))}},t.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,o=e.onNewFolderCancel,r=e.onNewFolderSubmit,i=y._("New folder"),l=n.default.createElement("div",null);return t===h.NewFolderCreationState.PENDING_INPUT?(i=y._("Folder name"),l=n.default.createElement(m.TileLabelInput,{label:i,onCancel:o,onSubmit:r})):t===h.NewFolderCreationState.SAVING_INPUT&&(i=y._("Creating new folder…"),l=n.default.createElement(w.TileItemLabelText,{className:"tile-label__text--saving",label:i})),{altText:i,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:l}},t.prototype.getTileGridRef=function(){return this.tileGrid},t.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,o=e.sections,i=e.viewType,l=r.default({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode}),a=new Set;return this.state.selectedIds.forEach(function(e){return a.add(e)}),n.default.createElement("div",null,n.default.createElement(w.InfiniteTileGrid,{key:"tileGrid",ref:this.setTileGridRef,totalNumItems:this.state.totalNumItems,containerClass:l,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:_.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:_.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:o.sectionStartIndices,sectionLabels:o.sectionLabels,showLabels:!this.props.isPhotosPage,contentOffset:136,getTileItem:this.getTileItem,selectedIds:a,handleTTI:this.props.onTTI,thumbStore:this.props.thumbStore,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:_.ViewTypeGridSizes[i],tileHeight:_.ViewTypeGridSizes[i],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget}))},t.defaultProps={enableMaxHeightGrouping:!1},t})(n.default.PureComponent);t.FilesViewTileGrid=L}),define("modules/clean/react/files_view/tile_label_input",["require","exports","tslib","external/classnames","react","modules/clean/react/files_view/name_input"],function(e,t,o,r,i,n){"use strict";function l(e){var t=r.default("tile-label-input",e.className),o=e.defaultValue||"",l=function(e){e.stopPropagation(),e.preventDefault()};return i.default.createElement(n.NameInput,{className:t,defaultValue:o,label:e.label,onCancel:e.onCancel,onClick:l,onSubmit:e.onSubmit})}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importDefault(i),t.TileLabelInput=l}),define("modules/clean/react/files_view/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.ESC="ESC",e.SUBMIT="SUBMIT",e.BLUR="BLUR"})(t.NameInputActionSource||(t.NameInputActionSource={}));(function(e){e.CREATE_FOLDER_INACTIVE="CREATE_FOLDER_INACTIVE",e.PENDING_INPUT="PENDING_INPUT",e.SAVING_INPUT="SAVING_INPUT"})(t.NewFolderCreationState||(t.NewFolderCreationState={}));(function(e){e.PENDING_INPUT="pending-input",e.SAVING_INPUT="saving-input"})(t.RenameState||(t.RenameState={}));(function(e){e.LOADED="LOADED",e.LOADING_FIRST_PAGE="LOADING_FIRST_PAGE",e.LOADING_REMAINING_PAGES="LOADING_REMAINING_PAGES"})(t.LoadingState||(t.LoadingState={}));(function(e){e.FILENAME="FILENAME",e.MODIFIED="MODIFIED",e.CATEGORY="CATEGORY",e.EXTENSION="EXTENSION",e.SIZE="SIZE",e.SHARED_WITH="SHARED_WITH",e.SYNC_SETTING="SYNC_SETTING",e.FILE_COUNTS="FILE_COUNTS"})(t.SortField||(t.SortField={}));(function(e){e.FILENAME="FILES_BY_NAME",e.MODIFIED="FILES_BY_MODIFIED",e.CATEGORY="FILES_BY_CATEGORY",e.EXTENSION="FILES_BY_NAME",e.SIZE="FILES_BY_SIZE",e.SHARED_WITH="FILES_BY_NAME",e.SYNC_SETTING="FILES_BY_SYNC_SETTING",e.FILE_COUNTS="FILES_BY_FILE_COUNTS"})(t.SortLabel||(t.SortLabel={}));(function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"})(t.SortDirection||(t.SortDirection={}));(function(e){e.Grid="GRID_VIEW",e.List="LIST_VIEW",e.LargeGrid="LARGE_GRID_VIEW"})(t.ViewType||(t.ViewType={}));(function(e){e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.NO_ACCESS="NO_ACCESS",e.ERROR="ERROR"})(t.FetchFolderSizeState||(t.FetchFolderSizeState={}));(function(e){e.NONE="NONE",e.ALL_FOLDERS="ALL_FOLDERS",e.NONSELECTED_FOLDERS="NONSELECTED_FOLDERS",e.NONSELECTED_NONSHARED_FOLDERS="NONSELECTED_NONSHARED_FOLDERS",e.NONSELECTED_NONSHARED_NONTEAM_FOLDERS="NONSELECTED_NONSHARED_NONTEAM_FOLDERS"})(t.DropTargetHighlightMode||(t.DropTargetHighlightMode={}))}),define("modules/clean/react/files_view/util",["require","exports"],function(e,t){"use strict";function o(e){return 0===e.button&&!r(e)}function r(e){return e.altKey||e.ctrlKey||e.metaKey}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldHandleClick=o,t.hasModifierKey=r}),define("modules/clean/react/maestro/tile_grid",["require","exports","tslib","react","external/react-dom","external/classnames","modules/clean/js_client_stopwatch","spectrum/culled_list","modules/clean/react/maestro/tile_element","modules/clean/react/maestro/tile_grid_logger"],function(e,t,o,r,i,n,l,a,s,d){"use strict";function c(e){var t=null;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(!t||t.length!==o.length||!t.every(function(e,t){return e===o[t]}))return t=o,e.apply(void 0,o)}}function u(e){var t=e.className,o=e.label;return t=n.default("tile-label__text",t),r.default.createElement("div",{className:t},o)}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importStar(i),n=o.__importDefault(n);t.memoizeCallback=c,t.TileItemLabelText=u;var p=(function(e){function t(t){var o=e.call(this,t)||this;if(o.ttiReported=!1,o.itemRangeByRow=[],o.scrollTileIntoView=function(e,t){var r=o.props.contentOffset||0,i=document.documentElement.scrollTop||document.body.scrollTop,n=Math.floor(t/o.props.tilesPerRow),l=e-r,a=o.getRowHeight(),s=n*a,d=s+a;i<=s&&d<=l+i||(s<i?window.scrollTo(0,s):window.scrollTo(0,d-l))},o.updateOnResize=function(){window.requestAnimationFrame(function(){o.getAndUpdateTileLayout()})},o.handleTTI=function(){o.ttiReported=!0;var e=o.props.handleTTI;e&&e()},o.setLastViewedPage=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,r=Math.round(t/e);if(o.tileLoadLogger.pruneTrackedPages(),o.tileLoadLogger.logCompletedPages(),!o.tileLoadLogger.pagesCompletedLogging.has(r)&&!o.tileLoadLogger.pagesToLog.has(r))if(r!==o.tileLoadLogger.lastViewedPage){if(o.tileLoadLogger.lastViewedPage=r,o.tileLoadLogger.pageChangeTime=o.tileLoadLogger.getTimeNow(),!o.tileLoadLogger.startTimeByPage.get(r)){var i=o.tileLoadLogger.getTimeNow();o.tileLoadLogger.startTimeByPage.set(r,i)}}else{var i=o.tileLoadLogger.getTimeNow();i-o.tileLoadLogger.pageChangeTime>1e3&&o.tileLoadLogger.pagesToLog.add(r)}},o.logTileError=function(e){o.tileLoadLogger&&o.tileLoadLogger.recordTileError(e),o.props.logTileLoading&&d.InfiniteTileGridLogger.logThumbLoadError()},o.logTileLoaded=function(e,t,r){o.tileLoadLogger&&o.tileLoadLogger.recordTileLoaded(e,t,r)},o.renderTileElement=function(e,t,i){if(e<0||e>o.props.totalNumItems)return null;var n=o.props.getTileItem(e,i);if(!n)return r.default.createElement(s.TilePlaceholder,{leftOffset:t,tileHeight:o.state.tileWidth,tileWidth:o.state.tileWidth});var l=o.ttiReported&&o.props.delayRenderFullTile,a=n.isSelectable&&!!o.props.selectedIds&&o.props.selectedIds.has(n.id),d=n.file&&o.props.shouldFileBeHighlightedDropTarget(n.file,a),c=d&&n.file===o.props.activeDropTarget;return r.default.createElement(s.TileElement,{file:n.file,paper:n.paper,key:n.id,onTileAction:n.onTileAction,width:o.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:n.labelNode?o.props.labelHeight:0,delayRenderFullTile:l,actionNode:n.actionNode,thumbnailUrl:n.thumbnailUrl,labelNode:n.labelNode,altText:n.altText,onThumbnailError:o.props.logTileLoading?o.logTileError:void 0,onThumbnailLoad:o.props.logTileLoading?o.logTileLoaded:void 0,isDraggable:n.isDraggable,onDragEnter:n.onDragEnter,onDragStart:n.onDragStart,isFocused:n.isFocused,isSelectable:n.isSelectable,isSelected:a,isViewOnly:n.isViewOnly,isActiveDropTarget:c,isAvailableDropTarget:d,handleToggleSelect:n.handleToggleSelect,checkboxAriaText:n.checkboxAriaText,thumbStore:o.props.thumbStore,scrollTileIntoView:o.scrollTileIntoView,href:n.href})},o.renderRow=function(e,t,i){var n=o.rowHeights?o.rowHeights[t]:o.getRowHeight();if(!e)return r.default.createElement(a.CulledItem,{className:o.props.rowClass,height:n,key:t,tagName:"li",topOffset:i});if(!Array.isArray(e))return r.default.createElement(a.CulledItem,{className:o.props.rowClass,height:n,key:t,tagName:"li",topOffset:i},e);for(var l=e,s=l[0],d=l[1],c=o.state.tileWidth+o.props.tilePadding,u=[],p=4,f=s;f<d;f++)u.push(o.renderTileElement(f,p,u.length)),p+=c;return r.default.createElement(a.CulledItem,{className:o.props.rowClass,height:n,key:t,tagName:"li",topOffset:i},u)},o.handleRangeInView=c(function(e,t){var r=o.props.onRangeInView;if(r){var i=o.translateRowRangeToItemRange(e,t);r(i[0],i[1])}}),o.props.sectionLabels||o.props.sectionStartIndices){if(!o.props.sectionLabels||!o.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(o.props.sectionLabels.length!==o.props.sectionStartIndices.length)throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return o.state={tileWidth:o.props.maxTileWidth},l.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),o}return o.__extends(t,e),t.prototype.updateLayout=function(){var e=this;this.animationFrameRequestId=window.requestAnimationFrame(function(){var t=e.getAndUpdateTileLayout();e.props.logTileLoading&&!e.tileLoadLogger&&e.setupTileLogging(e.getRowHeight(),t.tilesPerRow)})},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateOnResize),this.updateLayout()},t.prototype.componentWillReceiveProps=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(e.totalNumItems),this.props.maxTileWidth!==e.maxTileWidth&&this.updateLayout()},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateOnResize),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),delete this.tileLoadLogger)},t.prototype.getRowHeight=function(){var e=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(e+=this.props.labelHeight+4),e},t.prototype.getPageHeight=function(){var e=document.documentElement.clientHeight||window.outerHeight,t=this.props.contentOffset||0,o=e-t,r=this.getRowHeight(),i=r*Math.ceil(o/r);return Math.max(i,r)},t.prototype.getAndUpdateTileLayout=function(){var e=this.props.maxTileWidth+this.props.tilePadding,t=i.findDOMNode(this);if(!t||0===t.clientWidth)return{tileWidth:this.state.tileWidth,tilesPerRow:this.props.tilesPerRow};var o=t.clientWidth,r=Math.max(1,Math.floor(o/e)),n=this.props.maxTileWidth;return o%e>1&&(r++,n=o/r-this.props.tilePadding),this.state.tileWidth!==n&&this.setState({tileWidth:n}),this.props.tilesPerRow!==r&&this.props.onTilesPerRowChange(r),{tileWidth:n,tilesPerRow:r}},t.prototype.setupTileLogging=function(e,t){var o=this.getPageHeight(),r=t*Math.ceil(o/e);this.tileLoadLogger=new d.InfiniteTileGridLogger(this.props.totalNumItems,r,t,this.handleTTI),this.tileLoadLogger.pagesToLog.add(0);var i=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(0,i),this.logTrackingInterval=setInterval(this.setLastViewedPage,200,o)},t.prototype.translateRowRangeToItemRange=function(e,t){var o=this.itemRangeByRow;return[o[e][0],o[t][1]]},t.prototype.render=function(){var e=this,t=this.itemRangeByRow;t.length=0;var o=[],i=this.getRowHeight(),n=this.props,l=n.containerClass,s=n.enableMaxHeightGrouping,d=n.numThresholdRows,c=n.scrollDeltaThreshold,u=n.sectionStartIndices,p=n.sectionLabels,f=n.totalNumItems;if(u&&u.length>0)return this.rowHeights=[],u.forEach(function(n,l){var a=f;l!==u.length-1&&(a=u[l+1]),e.rowHeights.push(32);var s=a-n,d=Math.ceil(s/e.props.tilesPerRow),c=p[l],m=r.default.createElement("div",{className:"tile-section-header"},c);o.push(m),t.push([n,n]);for(var h=0;h<d;h++){var _=n+h*e.props.tilesPerRow,g=Math.min(_+e.props.tilesPerRow,a),S=[_,g];o.push(S),t.push(S),e.rowHeights.push(i)}}),r.default.createElement(a.CulledList,{enableMaxHeightGrouping:s,items:o,listItemHeight:this.rowHeights,itemBuffer:d,className:l,renderRow:this.renderRow,scrollThreshold:c,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView});for(var m=Math.ceil(f/this.props.tilesPerRow),h=0;h<m;h++){var _=h*this.props.tilesPerRow,g=Math.min(_+this.props.tilesPerRow,f),S=[_,g];o.push(S),t.push(S)}return r.default.createElement(a.CulledList,{enableMaxHeightGrouping:s,items:o,listItemHeight:i,itemBuffer:d,className:l,renderRow:this.renderRow,scrollThreshold:c,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(e,t){return null},handleTTI:function(){}},t})(r.default.PureComponent);t.InfiniteTileGrid=p}),define("modules/clean/sharing/browse_exports",["require","exports","tslib","modules/core/browser","modules/clean/sharing/gating_util","modules/clean/sharing/async_share_modal_util","modules/clean/sharing/public_folder/public_folder","modules/clean/sharing/wizard/async_wizard_modals"],function(e,t,o,r,i,n,l,a){"use strict";function s(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];new Promise(function(t,o){e(["modules/clean/sharing/shared_content_link_mount_folder"],t,o)}).then(o.__importStar).then(function(e){e.mountSharedFolder.apply(void 0,t)})}function d(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(r){return[2,new Promise(function(r,i){new Promise(function(t,o){e(["modules/clean/sharing/ui_util"],t,o)}).then(o.__importStar).then(function(e){r(e.genContentManagerBridgeUri.apply(void 0,t))},i)})]})})}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(o){switch(o.label){case 0:return[4,d.apply(void 0,e)];case 1:return t=o.sent(),r.open_tab(t.toString()),[2]}})})}function u(t,r,i,n,l,a,s,d){new Promise(function(t,o){e(["modules/clean/sharing/cdm_new_folder_modal"],t,o)}).then(o.__importStar).then(function(e){e.showCdmNewFolderModal(t,r,i,n,l,a,s,d)})}function p(t){return o.__awaiter(this,void 0,void 0,function(){var r;return o.__generator(this,function(i){switch(i.label){case 0:return[4,new Promise(function(t,o){e(["modules/clean/sharing/cdm_new_folder_modal_util"],t,o)}).then(o.__importStar)];case 1:return r=i.sent(),r.showAppropriateNewFolderModalForCdmUser(t),[2]}})})}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importStar(r),t.asyncMountSharedFolder=s,t.asyncGoToContentManagerForPath=c,t.asyncShowCdmNewFolderModal=u,t.asyncShowAppropriateNewFolderModalForCdmUser=p,t.GoldenGate=i.GoldenGate,t.asyncShowShareModal=n.asyncShowShareModal,t.asyncShowNewFolderShareModal=n.asyncShowNewFolderShareModal,t.asyncShowPrefilledShareModal=n.asyncShowPrefilledShareModal,t.expAsyncShowShareInterstitialModal=n.expAsyncShowShareInterstitialModal,t.makePublicFolderLink=l.makePublicFolderLink,t.shouldUsePublicFolderSharing=l.shouldUsePublicFolderSharing,t.showPublicFolderLinkModal=l.showPublicFolderLinkModal,t.asyncShowShareAFolderWizardModal=a.asyncShowShareAFolderWizardModal});
//# sourceMappingURL=pkg-files-view-extra.min.js-vflNxkpnB.map